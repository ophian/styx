Version 2.9.5-Dev ()
 ------------------------------------------------------------------------

  * Fix DB utf8 maintenance migration task and set a strict mode session
    tweak for table migration ALTERs.

  * Fix spamblock [*]_htaccess table query to prevent failure on mysql >= 5.7

  * Silence some PHP 7.4 deprecation warnings using cache lite


Version 2.9.4 (2020-04-03)
 ------------------------------------------------------------------------

  * Fix Spartacus Plugin Synchronisation for local purged sidebar plugin cleanup

  * Fix Spartacus Plugin Synchronisation for local sidebar plugin upgrades.
    Now that the wrong locationtype was fixed (see before), the Synchronisation
    could do its job, purging and creating the pluginlist items correctly.
    This revealed missing another setPluginInfo() run for the local sidebar
    list to checkout the 'upgrade_version' for being 'upgradeable'.
    This runs once only on upgrades and/or opening the sidebar install list
    for the very most local plugins.

  * Fix Spartacus Plugin Synchronisation, which sometimes signed certain
    plugintype (event|sidebar) wrong for Spartacus/Plugin request actions.
    This extends the Plugin API setPluginInfo() method with a new 6th type
    parameter.
    This all will make using Zarathustra tasks obsolete at the very end.

  * Fix media.base_properties property_subgroup 'ALL' keys assignment for
    media_items.tpl fields. Regressional fixes in admin/media_choose.tpl and
    frontend related media_showitem.tpl template themes
    [default, default-php, 2k11].

  * Fix Mysql "simple" Install routine for utf8mb4 usage, while not having access
    to an "utf8" defined SQL_CHARSET and thus not setting the "dbUtf8mb4_converted"
    configuration var. Auto fix previous "simple" installs by maintenance check.


Version 2.9.3 (2020-01-10)
 ------------------------------------------------------------------------

  * Plugin s9ymarkup: Improving fixes for underscores and check htmlcomments.
    Do NOT use for others than comments, if internally using a markup plugin
    or the WYSIWYG-Editor.

  * Allow comments sanitizeHtmlComments() strikethrough <s>, underline <u>,
    while being part of the CKE admin form toolbar.

  * Fix jumbled themes comments conditional trace path

  * Fix a comment subscription bug not deleting old saved sessions

  * Fix certain comment NL2BR parsing bugs with allowHtmlComment option cases

  * Sync [s9y] - Fix an old bug with backend Smarty template added hooked
    plugin media file and spawnNuggets parameters.

  * Fix core CKE added procurator plugin for some s9ymdb tagged cases to
    prevent {cke_protected} data.

  * Add a hardcoded $serendipity['max_page_limit'] variable to avoid
    break(-in) attempts.

  * Bugfix MediaLibrary 'addmedia_directory' cookie assignment issue

  * bbcode event plugin: Fix some missing list-style-type styles

  * Sync [s9y] Better check global $_GET HTTP Request-Var reference.
    Prevents PHP warnings (Issue 642) thanks to @hannob

  * Escape category icons to avoid malicious backend XSS. Thanks to @hannob.

  * Fix minor backend styles regression with global figure/figcaption styles

  * Fix class selector typos in Skeleton theme

  * Sync [s9y] Only allows .txt and .log files for spamblock logging.
    Thanks to Gary O'Leary-Steele (CVE TBD)

  * Sync [s9y] Fixes not properly displaying plugin save errors (validation)


Version 2.9.2 (2019-09-12)
 ------------------------------------------------------------------------

  * Add WYSIWYG-Editor fallback styles to elder defined gallery image_blocks
    without col or row defines. Same applies to global default/style_fallback
    in the frontend.

  * Add sidebar comment widget styles to break long URLs overflows to [2k11,
    next] themes.

  * Fix backend sidebar Maintenance link permission for special cased user
    which has siteAutoUpgrade permission to perform the 503 Maintenance Mode.

  * Please read the important core upgrade configuration notes for the 2.9 repo-
    sitory branch versus upcoming Serendipity Styx 3.0 Next master branch at:
      https://ophian.github.io/2019/08/19/Serendipity-Styx-2.9.1-released/

  * Fix and simplify the quick de-select(ion) of sticky-set entries by entries
    list, which oddly did not properly delete the sticky attribute, and so an
    un-stickied entry never fell back into the list ordered line.
    If you have already used this feature, please re-check these entries for
    their database ID (easy to get known by hovering over this entries task
    buttons in the entries list) and run this command in a tool like phpMyAdmin
    to unset the entries sticky attribute in the entryproperties database table.
    [Change "PREFIX" and "X" to your needs]:
      DELETE FROM PREFIX_entryproperties WHERE entryid = X AND property = 'ep_is_sticky'

  * Fix stable Archive assigning wrong pagination values in entries API again,
    which was working right, but had the issue of not setting navigation points,
    like the "X page of N" header and possible navigation buttons, to follow the
    stable archive principle of directional past/future switch, like in the
    timeline theme, which definitely was doing right, but was totally confusing.
    Now everything is much simpler and a page 51 is page 51 example-wise and so on.


Version 2.9.1 (2019-08-19)
 ------------------------------------------------------------------------

  * Fix some core and plugin occurrences of wrong set full path concat slashes
    and use the defined constant for the Smarty compile dir where appropriate.

  * Fix stable Archive in the entries API, assigning wrong pagination values
    so any Themes entry paginations got wrong start values for the current
    page, and the page calculations for prev/next link pages.

  * Improve Timeline theme for Smarty integer operation conditions

  * Fix 2k11/next theme styles for "flexed" <hr/> element lines and in-bound
    galleries display(s) under certain conditions.

  * Add default figure/figcaption stylings to the style_default stylesheet

  * Add htmlarea CKE config new figure/figcaption elements to the ACF
    extraAllowedContent string to support this for display and saving!

  * Fix MediaLibrary media rename allowance for non-images like media objects

  * Fix some unchecked images API debug logger object treats

  * Fix backend pluginmanager non-POSTED 'authorid' update_plugin_owner update
    on moving plugins.

  * Fix SQL check for maintenance Image Sync option 4: "convert" thumb prefix
    name to not fetch empty thumbnail field names.

  * Fix 'is_image' wrong file 'location' assignment for hotlink cases

  * Fix serendipity_makeThumbnail() bug not returning the newsize sizes for
    messaging.

  * Fix a MediaLibrary bug within the Smarty link assignment for non-internal
    images.

  * Fixed an old bug in serendipity_insertMediaProperty() property_subgroup
    parameter to remove DB mediaproperties table field items before inserting
    them again.
    In view of Styx having fixed the sql layer files for error purposes, this
    now showed up as valid errors in serendipity_insertMediaProperty(), since
    possible DB items were not (properly) removed before inserting them (again).

  * Add theme checks for old and unsupported themes with "Engines: Yes"
    (i.e. wp-compat) preview image files, adding a WebP image once if
    no preview.png file is available and that hints to remove the theme
    via maintenance (WebP able browsers only).
    Second, checks for loading performance and size (png vs jpg).
    With Styx major next 3.0 revisions these themes will probably be
    auto-converted. Upgraders, please check them yourself until then.


Version 2.9.0 (2019-06-01) - Give Peace a Chance - 1969
 ------------------------------------------------------------------------

  * Due to the template focused Styx 2.8.0 version was somehow delayed in
    April and then overrun by a flood of Core improvements and fixes, the
    version was abandoned in favor of 2.9.0.

  * [NOTE] A word about (server) Distribution politics for the ImageMagick
           graphics package and new exciting image formats.
    There are two current versions of ImageMagick, the LTS-alike version 6,
    which will be supported for another 7+ years and the rewrite version 7,
    being a little more strict and which becomes new features and enhancements
    etc. This will give legacy applications more time to upgrade to version 7.

    The current stable Debian 9 "stretch" is running IM 6.9.7.x, while upcoming
    Debian 10 "buster" and "sid" are at IM 6.9.10.x versions. That means, it seems
    that even for dist-upgrades the next ~5 years there will be no change, without
    giving the opportunity to run both versions co-existing in your environment.
    Same issue for Centos/Fedora or Ubuntu. Fedora Devs stated to support the
    co-existing tooling, so that migration is at least possible over the years.

    Serendipity Styx does already support ImageMagick 7 processing.

    WebP support is another thing coming up. As you might have noticed, bigger
    web sites already use WebP images more and more. WebP is a new image format
    developed by Google, which is both, lossy and lossless. WebP-related software
    is released under a BSD license. It is a sister Project of VP8 video and WebM
    multimedia formats. I am truly convinced that this will be the NEW open
    standard for lossy compressed true-color graphics on the web in the near future,
    producing much smaller files of comparable image quality to the older JPEG and
    PNG schemes. There are limitation as ever, since you need a browser to support
    it - well, and the good thing is the most already do - and you need PHP builds
    enabled --with-webp, you need either PHP GD having it enabled (see gd_info())
    or ImageMagick build with webP support, which is ready for Debian 10 since
    6.9.10.23+dfsg-1 version (see above).

    Unwilling to wait?
    You can do one thing about it now. Load the free available tool cwebp and pre
    convert your images to the new format before you upload them to your blog. If
    you then have PHP 7 with GD enabled WebP support or even the mentioned IM (or
    better) versions, then you can already use WebP in your Styx MediaLibrary with
    success. If not, you cannot create an upload auto thumb of this format for the
    moment and probably have to wait until Styx will release the next major version
    3.0.

  * Re-allow MediaLibrary media purge issue, since 2.1-beta1 on Feb 4, 2016,
    if "Standard User" GROUP has correct adminImagesDelete permission.

  * Use new lang constant for the group members label

  * Fix CREATE NEW group action message for passed-over name variable

  * Improve Users and Groups list for readability and visual difference

  * Improve Users list order by userlevel before sorting natural by realname

  * Add new group related, buttoned informational messages (per lang constants)
    for the ADMIN / Editor in CHIEF based differing group administration.

  * Add a NEW administrative group permission flag: 'siteAutoUpgrades'.

    For the case you have a MULTIUSER system, and there you have an "Editor
    in Chief" user which you want to also access site Auto-Upgrades, you can
    do the following for example as the ADMINISTRATOR.
    Either:
      - ADD a new SPECIAL group with 'siteAutoUpgrades' [x] permission AND
        'Hidden group / Non-Author' [x] and assign it ADDITIONALLY to this
        single "special" user afterwards in the USERS administration section;
      - OR copy the CHIEF group to a CHIEF+ group including 'siteAutoUpgrades' [x]
        and assign this group - including the CHIEFDITOR group - SINGULARLY to
        the "special" user of request.
    Although the second does look more straightforward, the first is the
    recommended and easier approach!
    Do not change the CHIEFEDITOR group itself, for security!

  * Restrict the (dashboard) auto-update method to the Administrator only.

  * Fix wrong USERLEVEL_EDITOR_DESC and USERLEVEL_CHIEF_DESC constant translations
    for [cs, cz, sk] languages.

  * Improve category counted entries by-author-notation for the improved counter

  * Improve entries counter for categories, by giving up the too strict set
    authorid-only SQL fetch for high-privileged user (groups).

  * [Security] Deny non-privileged grouped users to add sub-categories to
    categories by others. This sadly has the downside of being unable to do
    this on self created categories too (eg. standard users), though.
    You then have to ask an Editor in CHIEF or the ADMIN for it.

  * [Security] Fix bug, that a less-privileged user was allowed to edit other
    authors categories without having (group) permission.

  * Add pdo-postgres to backends categories db type SQL division

  * Fix backends wrong category write permission "selected" selection

  * Remove Mozilla CSS hack due to End-Of-Life with next Firefox 68 version in
    the backend and the "default" frontend theme. Read about it here:
    https://www.fxsitecompat.com/en-CA/docs/2018/moz-document-url-prefix-css-hack-will-no-longer-work/

  * Add a backends entries list quickie to easily de-select a stickied entry

  * Fix backends pingback comment action block margin for media screens

  * Fix group permission_* constants for the permissive variable name in
    [cn, cs, cz, fi, hu, ja, tr, zh] languages. DO NOT translate or dismiss!

  * Fix backend comments list (count) SQL query for (non-)privileged users

  * Do not present the quickjump spamblock configuration button for non-authorized
    users in comments.

  * Do not show rename scriptlet for non-authorized users in MediaLibrary

    PLEASE NOTE: Further finetuning of permission by GROUP and the users ID,
                 i.e. to delete images OF and BY this particular user only,
                 is negligible, since the MediaLibrary always runs with ID 0,
                 which is NOT some kind of superuser, than a not set authorid.

                 Strictly having this since S9y 2.1, this pasts back to 1.3 or
                 1.4 Serendipity versions, where the media library use of correct
                 authorid was given up, due to user error experiences, for the
                 simpler use of only ACL access-control based permissions, not
                 media items themselves.
                 Sadly some of these ACL permissions won't work without having a
                 real authorid to condition the output themselves.

                 NOW, since these media functions have developed, we could even
                 reopen this in future. Please file an issue or valid request to
                 discuss.

  * Fix for Standard editor`s permission to view and pass MediaLibrary images
    via popup.

  * Fix the entryforms javascript hidden extended entry textarea for the plain text
    Editor, by a previously possible set localStorage cookie.

  * Fix the dashboards db query in Styx 2.2.0 "no default widget" option for authors

  * Improve backends comments list comment header for length

  * Fix commentpopup commentform condition for time-frame(d) "allow(ed)_comments"

  * Extend spamblock time-frame option (since Styx 2.6.0) for trackbacks

  * Upgrade jQuery lib to version 3.4.1

  * Note UTF8 mb4 support ready for SQLite3 and PostgreSQL since version 9.4

  * Remove maintenance restriction note for entries media replace/rename iteration
    with non-MySQL databases.

  * Add is_countable() PHP < 7.3 polyfill to the functions API

  * Fix (old) bundled libs XML/RPC because of PHP7 new count() warnings

  * Check for "non-Internet" image formats already uploaded to the MediaLibrary
    and place a detailed image EXTENSION handler error message in the scale
    image and image properties pages.

  * [UPGRADERS] Some elderly Serendipity systems might have a mis-configured, or
    elder set default value in the "Media properties" option field configuration,
    issuing missing fields in the MediaLibrary filter options search form, or the
    media per item mediaproperties form.
    Please check that your settings in Sidebar "Settings" :: "Configuration" :
      "Image Conversion Settings" (tab): "Media properties" option
    do reflect your actual needs or special sets. Else better reset the value to
    "DPI:IMAGE;RUN_LENGTH:VIDEO:AUDIO;DATE;COPYRIGHT;TITLE;COMMENT1:MULTI;COMMENT2:MULTI;ALT"
    without quotes and in this order.

  * Fix both postgres and pdo-sqlite serendipity_db_query() SQL error backtrace
    conditions to consistently emit only when $reportErr (4th parameter) is set.

  * [Security] Secure non-production state SQL (4th parameter) forced backtraced
    errors with PHP DEBUG_BACKTRACE_IGNORE_ARGS bitmask.

  * Add image thumb KB file size to MediaLibrary item info array

  * Fix db/mysqli thrown (and missing) error reporting, depending on blogs
    $serendipity['production'] state.

  * Fix db/sqlrelay for error message consistency

  * Improve fallback condition in entity/specialchars wrapper functions

  * Fix wrong constant declaration in modemaintain plugin

  * Fix getimagesize() full file path for MediaLibrary media info

  * [Security] Sanitize simple printed $sql errors in db layers, which also
    helps showing up complete error messages in cases.

  * Improve some media rename item related messaging

  * Remove the image (file | filedir | dir) media rename limitation from
    MediaLibrary and entry related databases like (entries / entryproperties
    cache / staticpages) and now support all current db layers, although the
    MySQL regular expression is more precise and recommended at all.
    References staticpage event plugin update v.5.68.

  * Fix regression in #28e1dfd for staticpage media item rename actions, when
    this had no corresponding value in entries DB.

  * Sync [s9y] image comment change:
    - Use figure/figcaption markup for media db images w/ captions.

  * Fix media rename actions in entryproperties cached entries for maintenance
    task "convertThumbs".

  * Allow automatic media item renaming actions of entryproperties cached
    entries too. (See previous staticpage changelog entry for staticpages.)

  * Fix some wrong heading serendipity_convertThumbs() debug log entries

  * Allow renaming of staticpage entries media object links and link/image
    items via the MediaLibrary too. Temporary(?), and similar to
    serendipity_convertThumbs() actions, established in core.

  * Sync [s9y]: Add hidden mediaID tag to media object links added to entries.
    This enables automatic entry link renaming when this file is renamed
    via the MediaLibrary.

  * Allow serendipity_setCookie() function to auto-set the HTTPOnly flag,
    under certain default parameter condition, to protect against XSS flaws.

  * Improved [de, en] forced moderation descriptions in spamblock plugin,
    to clear up minds for what is meant with use or reset.

  * Extend serendipity_plugin_comments with a "bodyclone" trackback placeholder

  * Changing the default wordbreak option of serendipity_plugin_comments,
    by adding a new 'cssbreak' (default:true) option for theme css comment body
    (word) break behaviour styles.
    This changes and overrules the wordbreak option!
    UPGRADERS: Check your Settings and Sidebar appearance!

  * Allow to receive special cased multi valid trackbacks from one entry, when
    spamblock plugins (recommended!) option "check duplicate comments" is set.
    (thanks @mmitch (gitHub)!)

  * Add missing success message style to [blue, bulletproof, carl_contest,
    competition, contest, default-rtl, idea] themes.

  * Fix serendipity_image_center styles regression in the "next" theme and
    add a real serendipity_image_center selector style to the "default" theme.
    UPGRADERS: Please check your COPY themes.

  * Fix kubrick theme wrong commentlist selector style and add the commentpopup
    template file modified, since using ol li lists.
    UPGRADERS: Please check your COPY themes.

  * Improve commentpopup template file with "frontend_header" hook, for possible
    jQuery capabilities (eg. CKEplus highlight code) and specific styles in
    [bulletproof, default, default-php] themes.

  * Fix old ".container_authors/quicksearch_xxx" css plugin class name selectors
    since 2.0-beta1, in early 2014. Applies to [blue, bulletproof, carl_contest,
    competition, contest, default-rtl, default, idea, kubrick] themes.

  * Allow search requests by post forms

  * Check API method first in 2k11 theme config, for theme switches

  * Add min-width to default theme sidebars

  * [Security]: Sync [s9y] - Fix XSS in Media Library by interpreted EXIF tags

  * Sync [s9y] nl2br plugin nl2p-mode changes (partial)
    - Fix bug in p-mode that ate pre elements
    - Improve nl2br p-mode to work with <strike> tags

  * Sync [s9y] timeline theme update

  * Fixup non-standard $entry.plugin_display_dat emitting place in [2k11,
    bootstrap4, clean-blog, next, skeleton, timeline] themes.

  * Improve comment.php assignment for commentpopup templates comment author
    self condition, in [default, default-php] themes.
    Change applies to all falling back themes, even the Standard-theme.

  * Improve conditional comment popup entries list links in [2k11, default,
    default-php, next] themes

  * Add serendipity_commentlist container for consistency, referring to
    serendipity_trackbacklist container in ["carl_contest", "competition",
    "contest", "default", "default-php", "kubrick"].
    Also applies to the commentpopup template file.

  * Fix display of trackbacks in default-php emulator theme

  * Fix "entries.tpl" template file logical "millennium bug", not showing trackbacks
    in single entry views, when having enabled (frontend) $use_popups, which is for
    entries list links only. This simplifies conditionals at all.
    Applies to: ["bootstrap4", "bulletproof", "carl_contest", "competition",
    "contest", "default", "default-php", "kubrick", "next", "skeleton"] themes.
    UPGRADERS: Please check your COPY themes.

  * Add serendipity_trackbacklist container to [carl_contest, competition, contest].
    References b0ba198 in default theme.

  * Changed default theme for using the "read more" container as a paragraph
    and adding the entries summary title to the same format tag as in entries
    for consistency, and never use more than 2-chars abbreviation for the
    calendars head, since expanding too wide.

  * Simplify entries footer container conditions and move the entries_footer
    hook out. Applies to ["bulletproof", "carl_contest", "competition",
    "contest", "default", "default-php", "kubrick"] themes.
    UPGRADERS: Please check your COPY themes.

  * Add conditional sidebar class selectors for responsive child themes
    to the default theme index template files #mainpane node.

  * Disable "default" themes ".serendipity_entry p" styles, which should
    better natively use the default browsers behaviour, separating paragraphs
    with a single blank line.

  * Add specific selectors to "default" themes entries_summary template

  * Change default theme content/sidebar toogler to use the standard media
    screen size 1024px with. This is a need for engine and fallback themes.

  * Fix plugin_authors and plugin_categories to behave consistently for feed
    icon fallbacks.

  * Fix comments.tpl "$entry.allow_comments" true condition for reply link.
    Applies to ["2k11", "bootstrap4", "bulletproof", "clean-blog", "default",
    "default-php", "kubrick", "next", "skeleton", "timeline"] themes.
    UPGRADERS: Please check your COPY themes.

  * Fix commentpopup init checks and add frontend_footer hook for form assets
    (see emoticonchooser). Applies to [default, default-php, bulletproof] themes.

  * Change the "default"-themes entries footer selector to better fit semantically,
    since it is different to the real "serendipity_entryFooter" meta data selector.
    If already using a theme without an entries.tpl template file, falling back
    to "default", please style the new ".serendipity_entries_footer" pagination
    selector to your needs. Example:
        .serendipity_entries_footer {
            text-align: center;
            font-size: medium;
            margin-bottom: 1em;
        }

  * Improve trackback template "header" title to only linebreak on trackback
    types. Applies to [default, default-php] and falling back themes.

  * Improve pcomments template to not emit (styled) comment_content block,
    when body var is empty. Applies to [2k11, default, default-php, next]
    themes. UPGRADERS: Please check your COPY themes.

  * Fix (all) themes comment/contact form selector for consistency with the
    written book declaration, in "commentform.tpl". "plugin_contactform.tpl"
    and "plugin_dynamicform.tpl" template files, or themes falling back to.
    This applies to the ["2k11", "default", "default-php", "bootstrap4",
    "bulletproof", "clean-blog", "next", "skeleton", "timeline"] themes and
    the "default backend". Only the 2k11 "style.css" file had to be changed
    for the print rules.
    UPGRADERS: Please check your COPY themes.

  * Fix backend maintenance container issue when inside containers where too
    wide (Spamblock Maintain).

  * Fix bug of depth (&nbsp;) entities in template config select options being
    double encoded.

  * Upgrade for the [default] theme, removing XHTML and prepare ready for Styx 2.7+.
    UPGRADERS: Please check your copy themes.

  * Basic HTML5 Upgrade for the [kubrick] theme.
    UPGRADERS: Please check your copy themes.

  * Fix case insensitive ".serendipity_Entry_Date" and ".serendipity_entryFooter"
    selectors as responsive full blocks in [blue, competition, contest, default,
    default-rtl] and (lowered) for some fallback using themes.

  * Fix a missing image selector margin edge case in [blue, carl_contest,
    contest, competition, default, idea, kubrick, default-rtl] themes.

  * Smaller backend preview fixes to [contest, competition, default, default-rtl,
    kubrick] themes.

  * Smaller fixes to [blue, bootstrap4, bulletproof, contest, competition,
    carl_contest, default, default-php, default-rtl, idea, kubrick, next]
    themes.

  * Fix [default theme, preview_iframe.tpl] mode order

  * Fix [2k11, preview_iframe.tpl] template_option.webfonts condition for
    theme fallback cases when not being set.

  * Move copyright footer into non-embedded part in [contest, default] themes

  * Fix [kubrick] theme raw mode data condition

  * Fix some false variable handlers and bugs in default-php theme
    UPGRADERS: Please check your copy themes.

  * Fix some theme styles in [kubrick, default, default-rtl]
    UPGRADERS: Please check your copy themes.

  * Remove some remaining inline styles in [carl_contest, competition, contest,
    default-rtl] themes.
    UPGRADERS: Please check your copy themes.

  * Fix themes conditional $head_subtitle for the freetag related tags cloud, via
    the external_plugin hook in entries.tpl, for [blue, bulletproof, carl_contest,
    clean_blog, competition, contest, default, default-php, default-rtl, idea,
    kubrick, timeline] "index.tpl" template file.
    UPGRADERS: Please check your copy themes.

  * Add back button if a theme config was available without configuration

  * Some Serendipity Styx updates to [bulletproof, kubrick] themes
    UPGRADERS: Please check your copy themes.

  * Add default styles for HTML table ".archives_listing" and sidebars
    "ul#serendipity_categories_list" selectors to the style_fallback.css file,
    which removes entries_archives table attributes in [default, default-php
    and all themes without this template file using the fallback cascade].
    Same for the ".serendipity_calendar" selector.

    Also some old inline styles in plugin_calendar.tpl where removed in
    [carl_contest, contest, default-php, default-rtl, default]
    and another old inline styles in entries.tpl, which touched the
    [bulletproof, carl_contest, competition, contest, default] themes.
    UPGRADERS: Please check your copy themes.

  * Remove some redundant language constants in the bulletproof theme

  * Fix some unconverted variable handlers in default-php theme

  * Fix .serendipity_entry p{aragraphs} flexing floats in default theme

  * Change the GO submit button to RESET FILTERS in sidebar plugin categories,
    when inside a category URL routing situation.
    Also applied to [2k11, bootstrap4, default, default-php, next, skeleton]
    themes templates.

  * Fix serendipity_smarty_getImageSize() Smarty "fallback" path issue

  * Better handle wide table CSS styling issue in [2k11, skeleton].
    UPGRADERS: Please check your copy themes.

  * Bypass possible uninitialized $item['var']s in templates config API

  * Moved MAINTENANCE backend link into sidebar section ACTIVITY/appearance
    and the SPAMBLOCK backend link into section SETTING(s).

  * Prepare categories sidebar plugin to not emit markup when empty, so
    we are able to not show the categories section via sidebar.tpl(s).
    Added if "NOT empty($item.content)" condition to all core delivered themes.
    UPGRADERS: Please check your copy themes.


Version 2.7.0 (2018-12-31)
 ------------------------------------------------------------------------

  * Set default values of BACKENDPOPUP_GRANULAR as stated on Styx help center
    - configuration page.

  * Fix a (2.6.4-dev) regressional manifestation of wrong used rtrim() usage,
    which silently failed uploading media items to fresh installation.
    (This as well fixes cutOff MediaLibrary pagination parameters under
    certain conditions.)

  * Improve MediaLibrary directories page for fresh installations, to not show
    the base path media counter when having no folders and no items set yet.

  * Changed the dashboard shortcut ticker box to not expand, when not empty

  * Extend the frontend serendipity.css {TEMPLATE_PATH} replacement for
    subdirectory calls; tailored for categorytemplates.

  * Add calendar sidebar template to bootstrap4 theme

  * Enhance plugin sidebar archives links for category templates

  * Fix more strict PHP 7.3 preg_match routing regex due to PCRE2

  * Allow plugin_config $postKey 'categorytemplate' where BACK to form button

  * Do not include keys with empty value to $extraParems GET query string

  * Add (submit) pagination page fallback to MediaLibrary properties action
    link and its form, analogue to media scale.

  * Fix MediaLibrary properties action page header name truncation

  * Refactor MediaLibrary image scale page action, Smarty assignment and
    template(s):
    - to move the back button and change the image resize hint color to hint,
    - not truncate the titles on the image resize page,
    - simplify the action button link get parameters,
    - enclose the image resize hint box into an informational field box
    - and remove the scaling pages (useless) auto extra parameters, except for
      the possible pagination page number, to jump back to after submit.
      This might have some "hidden" regressions with deep ML filters & sortings.
      Check it out.

  * Fix old bug since 2012 not correctly failing the plugin(s) requirement(s)
    bag, which allowed installs/updates where it should have failed.

  * Enable all preparations for the now separated template files for entry
    comments and comment archive pages in serendipity_printComments() and
    serendipity_printCommentsByAuthor().

  * Fix some old themes for viewport and/or some global styles for gallery
    media images. Applied to [ blue, bulletproof, carl_contest, competition,
    contest, idea, kubrick ] themes. UPGRADERS: Please check your copies.

  * Fix commit (4ce2e5f) for carl_contest theme entries.tpl file

  * Add styles for the preparation of ".pc-owner" selector and the separated
    template files for entry comments and comment archive pages. Applied to
    [ 2k11, blue, bootstrap4, bulletproof, carl_contest, clean-blog, competition,
    contest, default-rtl, default, idea, kubrick, next, skeleton, timeline ]
    themes. UPGRADERS: Please check your copy themes.

  * Fix missing Smarty scope 'root' "assignment" in the "default-php" theme

  * Add new comment archive page "pcomments.tpl" template file to
    [ 2k11, bootstrap4, default-php, default, next, skeleton ] themes.
    The default ("default"-theme) fallback works with all themes which do
    not have their own file, or use their engines parent.
    UPGRADERS: Please check your copy themes.

  * Preparation to simplify entry comments and comment pages and comment
    author/owner selectors by changing the [ 2k11, bootstrap4, clean-blog,
    default-php, default, next, skeleton, timeline ] themes
    "comments_by_author.tpl" template file (and additionally the "index.tpl"
    for the "timeline" theme). UPGRADERS: Please check your copy themes.

  * Fix wrong 'footer_pageLink' assignment to stay compatible with themes
    based on (old) bulletproof-theme syntax for the entrypaging.

  * Preparation to simplify, add and/or fix comment author/owner selectors
    ".serendipity_comment_author_self" and (post comment) ".pc-owner"
    conditional checks in the "comments.tpl" file in [ 2k11, bootstrap4,
    bulletproof, clean-blog, default-php, default, kubrick, next, skeleton,
    timeline ] themes. UPGRADERS: Please check your copy themes.

  * Minor update to bootstrap4 styles

  * 2k11: Fix bottom-margin for serendipity_entry comments-by-author summary
    pages.

  * Add new 'frontend_fetchcomments' event hook to the comments API
    which allows SQL conditions by plugins; tailored for categorytemplates.

  * Initialize 'store_order' Smarty var to make empty checkable(s) run

  * lang: Rephrase outdated CATEGORIES_HIDE_PARALLEL_DESC constant text,
    since the "Hide categories that are not part of the category tree"
    option no longer relies on the categorytemplates plugin.
    UPGRADERS: Please check your categories plugin settings!

  * Add new 'frontend_fetchcategories' event hook to the entries API,
    which allows SQL conditions by plugins; tailored for categorytemplates.

  * Add archives entry count 0-sum excluder to [2k11, bootstrap4,
    next, skeleton] themes "entries_archives.tpl" per default.

  * Add new 'frontend_fetcharchives' event hook to the entries API,
    which allows SQL conditions by plugins; tailored for categorytemplates.

  * Extend categories / entries list link references

  * Fix plugin config generation for case ctype: hidden to not use the zebra

  * Add a Zombie Plugin Manager Clearance maintenance Spot, to get rid of
    old and locally outdated unsynchronized plugins.

  * Fix unknown regression for comment actions group styles

  * Separate spamblock main configuration_group for plugin_config generation

  * Fix mode_rewrite PAT_ARCHIVES permalinks pattern for wrong set
    $_GET['url'] eg. "/archives//C2.html" cases. This does not matter
    other archives rewrite cases. The (mode_rewrite) .htaccess file
    needs to get rewritten by changing the archives path to something else
    - save the configuration - reset to the old value and save again.

  * Add new lang constant ADDITIONAL_PROPERTIES_BY_PLUGIN for plugins
    that add extended properties to entry forms, eg. for
    <h3 class="additional_properties">
        <?php echo sprintf(ADDITIONAL_PROPERTIES_BY_PLUGIN, PLUGIN_EXAMPLEPLUGIN_NAME); ?>
    </h3>
    header usage.

  * Sort serendipity_getAllGroups() return natural by name, since this
    matters when having added additional groups.

  * Fix missing constants in various languages; remove doublets and fix
    spaces and missing linebreaks.

  * Changed threaded categories list to be block-consistent to MediaLibrary
    directory list styles.

  * Fix category ACL template that did not properly evaluate read/write selections

  * Reduce CHIEFEDITOR permissions for update and error logging configurations

  * Change [de] "Mediendatenbank" to "Mediathek" where appropriate

  * Change misread MEDIA and ADD_MEDIA constants in several languages

  * Add missing constant defines in slovak [sk] lang

  * Fix embedding install throws 404 message

  * Sync Smarty 3.1.34-dev-7 bugfix commits

  * Fix embedding install redeclaration issues

  * Add srcset to RSS URI pattern

  * Improve and refactor production type error messages

  * Improve media directory list adding the number of local media entries

  * Improve categories list adding the number of associated entries

  * Improve Gallery Widget to use use column ordered "lists", by 2, 3, or 4
    columns. The 3-Column design is the default and will smoothly downsize
    to 2 columns on MID-Screens and a single column on SMALL-screens. Vice
    versa for the 2-Column design. The 4-Column smaller item pattern will just
    behave the same, except it ends up with 2 columns on small screens.

    This is the recommended default order usage for modern browsers. The (old)
    "per row" flexed option is still supported. Please replace your galleries,
    since some image block class selectors and default styles have been changed
    accordingly and may not match any more.
    This new column order also supports the WYSIWYG-Editors drag & drop mode
    very well, if you do and check it carefully.

  * Improve Maintenance message handler

  * Fix MediaLibrary toolbar undefined filter keys

  * Styx now automatically converts media upload file extension to lower case

  * Fix an image selection error in the serendipity_editor.js.* template files
    regarding jQuery trim usage, not adding and closing the entry media add form.

  * Fix PHP 7 must implement Countable error in importers

  * Sync Smarty 3.1.34-dev-5 bugfix commits

  * Fix column section gap for auto floated block heights in Maintenance.
    This re-orders the Maintenance item sections.

  * Fix [2k11, default] themes default pre styles

  * Fix regression in all entries.tpl files for the entries list pagination.
    Please adapt to your copy themes.

  * Refactor parts of the MediaLibrary onTheFlySynch

  * Fix regression when debugging the MediaLibrary onTheFlySynch

  * Some operating systems/users tend to create, hold and manage image files
    without an extension. Uploading such images to the MediaLibrary does
    somehow work, but further image file management really needs a correct set
    extensions for the preview thumbs etc.
    We now try to automatically append the image extension by mime for the
    most common used image files (gif, jpeg, png, bmp, tiff, webp).

  * Fix serendipity_syncThumbs() SQL Query to support the root upload dir,
    which could have forced to unnecessarily run a database update.

Version 2.6.1 (2018-09-16)
 ------------------------------------------------------------------------

  * Fix NL2BR / NL2P regression added by Styx 2.6-alpha1, that
    prevented correct parsing of plain text markup_elements.

  * Improve maintenance theme manager for empty return messaging

  * [Security] Add some routing security checks against XSS

  * Consolidate version to Smarty 3.1.33 release

  * Fix non-active Backend tab section name is LOGIN, not NONE

  * Fix debug missing trace path in serendipity_convertThumbs()

  * Refactor images API triplet messages

  * Refactor serendipity_syncThumbs() messaging and improve borked
    check for the serendipity_updateImageInDatabase() loop.

  * Refactor serendipity_generateThumbs() messaging

  * Refactor serendipity_generateThumbs() for a better sorted list

  * Refactor serendipity_fetchImagesFromDatabase() ORDER BY parameter
    to allow multi field sorting orders in a simple way by an eg.
    $order = array('x, y, z') array.

  * Fix maintenance MediaLibrary "Rebuild Thumbs" conditional regression

Version 2.6.0 (2018-09-07)
 ------------------------------------------------------------------------

  * Add a Theme-Manager-Clearance maintenance Spot, to get rid of
    old and presumably outdated additional or private themes.

  * themes: Update last modified date for Styx 2.6.0

  * Better check (utf8mb4) database collation checks when not using MySQL

  * Change media related informational text messages highlight color

  * Internally release Styx 2.6-rc1

  * themes: Change 'use_corenav' default value to false
    [2k11, bootstrap4, clean-blog, next, skeleton, timeline]

  * Fix NAVLINK_AMOUNT constant text for all languages and fix some [de]
    lang typos.

  * Add changelog and modemaintain plugins to MAINTENANCE group

  * Sync Smarty 3.1.33-dev-12 bugfix updates, including Styx fix

  * Fix wrong set bulk image multimove conditional check variable for
    development sessions.

  * Update Dashboard bookmarklet links

  * Update Dashboard Quicktip documentary

  * Changed media properties form submit name

  * Fix MediaDB-Filter-Buttons shall react instantly - The ALL (type) needs
    a value to overwrite previously set types.

  * Better style media no-form-editable properties into header

  * Extend media properties preview to show MIME video files embedded instead
    of the thumb. For security only allowed for 'mp4', 'webm', 'ogv' files.

  * Change and fix media properties header for mime type and proper extension

  * Fix MediaLibrary backend scale image result handler

  * Changed the (media add to entry) "done"-button semantically and state
    it coloured as a submit action. Ditto, scale image template for the latter.

  * Fix SetCookie remember Media Options to only run on valid values

  * Removed entries API long time deprecated function serendipity_purgeEntry()
    and all reference calls.

  * Extend Dashboard empty notifications "hider" to be kept for current session

  * The plugup plugin now also listens on the fetchlist hook for its cookie
    caching handler.

  * Fix backend IE fontello.eot fix missing correct path

  * Sync Smarty 3.1.33-dev-7 bugfix updates, including Styx fixes

  * Fix upgrade tasks array for some wrong key notices since 2.5.0.
    Improve readability of upgrade tasks.

  * Fix templates image fullsize_preview check if not available

  * Fix possible BETA open_basedir restriction errors with Spartacus updates
    and finally fix a possible double slash in update file targets.

  * Fix a regression for the "If (backend) js is broken..." Sync - in
    plugins toggled config groups, not starting closed.

  * Fix Backend dashboard links container popup behaviour for set
    force_backendpopups and the default, when this has not been set yet.

  * Internally release Styx 2.6-beta2 for backend changes upgrade tasks

  * Move standard backend from 2k11 to default

  * Fix and extend Zarathustra (pluginlist) upgrade task

  * Sync [s9y] - Fix missing spamblock Captcha output by regression for non-GD
    users since 7/2013.

  * Fix regression with $template_config_groups in ['bulletproof, clean-blog,
    timeline] themes. Please adapt to your copy themes.

  * Fix return $textarray for array slice in nl2br::nl2p

  * Fix regression in "comments open to public" timeframe feature

  * Fix contactform <textarea> ID name in plugin_dynamicform.tpl to be
    statically set to 'serendipity_commentform_comment', since used by
    other plugins. Changed in [bulletproof, default-php, timeline] themes.
    Please adapt to your copy theme. Will be supported by upcoming
    serendipity_event_contactform v1.28 plugin.

  * Add missing init checks for nearly all contact-/dynamicform template
    files. Please adapt to your copy themes.

  * Re-add strict mirror check to Spartacus


Version 2.6-beta1 (2018-08-06)
 ------------------------------------------------------------------------

  * Fix regression in Spartacus putting together the URL for plugin update
    files

  * Sync [s9y]: If (backend) js is broken, fallback to open configuration options

  * Add "show_all" option to Smarty templates for the categories plugin.

  * Fix regression in ade7515 which caused SQL install to fail

  * Changed all themes entries.tpl file $entries array foreach logic check
    to be valid for muteExpectedErrors. Adapt this to your copy themes.

  * Moved from custom to Styx gitHub repository in Spartacus configuration.
    Themes are still fetched by the s9y origin repository.

  * Fix empty id parameter in serendipity_smarty_showPlugin to not break

  * Add new spamblock config option to only allow entry comments within a
    global timeframe, hiding the commentform globally after X days.

  * Do not allow to add groups with existing group-names

  * Do not allow to add users with existing user-names

  * Fix issue for entryproperties set entries to not show up on Frontpage
    entries list, were also hidden in archives views.

  * Update wysiwyg-style.css file for serendipity images styles in p tags

  * Upgrade templates based jQuery Lib from Series 1 to v3.3.1

  * Fix serendipity_syncThumbs for database thumb name update if not exists

  * Fix MediaLibrary filter sorting reset for DESC/ASC sorting

  * Add some version like "commit-days-since-first" info to the [2k11,
    next] themes info.txt description, since they have been touched a lot.

  * [Security]: Sync [s9y] - Make sure that the admins configuration for RSS
    and blog entry limit is parsed as integer for SQL queries.
    Thanks to @oreamnos and Hanno Boeck for reporting!

  * [Security]: Sync [s9y] - Prevent XSS possibility in "edit entries" panel.
    Thanks to @oreamnos and Hanno Boeck for reporting!

  * [Security]: Sync [s9y] - Disallow sending comment notifications and mails to more
    than one mail address. This could be used to approving opt-ins of requests
    that did not belong to the same email that was approved.
    Thanks to Hanno Boeck for reporting!

  * [Security]: Sync [s9y] - Remove exit.php open redirect, when not using the
    trackexits-plugin configured with Serendipity exit tracking.
    Thanks to Julio Cesar (from infosec.com.br) and Hanno Boeck for reporting!

  * For the Styx staticpage plugin both customized staticpage backendform
    template files in [clean-blog, timeline] themes were renamed and
    converted from ".../backend_templates/default_staticpage_backend.tpl"
    to the themes name:
    "templates/clean-blog/backend_templates/cleanblog_staticpage_backend.tpl"
    and alike
    "templates/timeline/backend_templates/timeline_staticpage_backend.tpl".
    Check out these staticpage backend forms, if you use one of this themes.

  * Add the categories name to nearly all themes entries_archives templates,
    to make sure a visitor understands, that archive entries have a dependency
    to the chosen category. Adapt this to your copy themes.

  * Fix default/style_fallback.css file, pre-bound into the serendipity.css
    file, to set a max-width of 100% to the serendipity image selectors and
    fixed the gallery item styles to better match the galleries forced width.

  * Prepare Backend and [2k11] Frontend javascript files to support more
    modern jQuery Lib versions.
    Be sure to not have "sticky" browser cached versions loaded after the
    upgrade. Also adapt this to your copy themes based on 2k11.

  * Fix gallery Backend form flexible flow for mobile screens

  * Check all themes "content.tpl" files, if $content_message is a plain
    message string or HTML markup.
    Adapt this to your copy themes which have this file.

  * Mark and highlight CKEditor plus Plugin-Updates as a SINGLE item update,
    to not use the UPDATE All button.

  * Do not allow to delete the user SELF

  * Extend the Smarty $compile_id (directory) to switch between current
    Backend/Frontend themes, to make compilation build checks easier and
    explicit.

  * Remove workaround for the "iframe_preview.tpl" template preview
    offsetHeight, since that problem does not exist any more!
    Fixed in [2k11, next, bootstrap 4] themes.
    Adapt this to your copy themes based on 2k11/next/bootstrap4.

  * Fix gallery header width styles floating screens

  * Fix wrong used POST password field passed to addAuthor

  * EXPERIMENTAL: Do not allow the Administrator to delete the highest
    group level he is in.

  * Fix regression for HTML comments. This has to be a global configuration
    option and now has moved in the global configuration section: "General
    Settings". You have to allow this option again, if already using!

  * Partially Sync [s9y] "Improved NL2P (nl2br)" commit, added to Serendipity
    by Stephan Brunker, part II.

  * Fix proper Backend message when developer build runs integrity check

  * PHP/TPL Groundwork for Debugging Session of uninitialized variables,
    when the Smarty_class::muteExpectedErrors method was enabled, which
    passes certain Errors and Warnings/Notices to the Serendipity Error
    Handler. This also checked into all core themes Frontend template
    files, which mainly are ["index.tpl", "entries.tpl", "comments.tpl",
    "comments_by_author.tpl", "preview_iframe.tpl", "plugin_staticpage.tpl"
    and possible "config.inc.php"] and some "plugin" extra files.
    Adapt this to your copy themes which have these file.

  * 2k11: Run new unsaved comment previews as Smarty default id 0 and
    add an independent style #c0 to the style.css file.
    Adapt this to your copy themes based on 2k11.

  * Remove 2k11 configs "is_templatechooser" SMARTY var assignment
    Adapt this to your copy themes based on 2k11.

  * Improve/extend HTML comments constant description and the backends
    empty stripped comment alert.

  * Regression fix comments_by_author pages comment(s) body, when html
    comments where allowed.

  * Added new Smarty $comment.meta variable for comments_by_author archive
    pages, already used in [2k11, next] themes comments.tpl template file.
    Adapt this to your copy themes based on 2k11/next.

  * Improve comments footer meta show-up logic by preview OR comment
    in [2k11, next] themes comments.tpl template file.
    Adapt this to your copy themes based on 2k11/next.

  * Fix security POST check typo for plugins posted config items

  * Improve inline style for the multicat checkbox of plugin categories

  * Allow option 'custom mirror' new case: 'none' to be able to disable
    the preset Styx mirror in the Spartacus plugin.

  * Improved comment previews, adding a preview message hint to the comment
    footer (meta) in [2k11, next] themes comments.tpl template file.
    Adapt this to your copy themes based on 2k11/next.

  * Fix missing $serendipity global for entries cache options generation

  * 2k11: Fix wrong if/then/else logic for the commentform display in
    the entries.tpl template file.
    Adapt this to your copy themes based on 2k11.

  * Fix plugin ownership issue not changing to selected author

  * Allow SPAMBLOCK_KILLSWITCH to disable Frontend templates commentforms
    for non-permissive users.

  * Bugfix missing key used for $media['base_property'][$propkey] indexes
    in serendipity_parseMediaProperties().

  * Fix PHP 7.2 assume uninitialized 'S9Y_DB_INCLUDED' constant warning

  * Re-add last remaining backward compatible mode wrapper for some
    (s9y-origin) additional_themes still using this old Smarty2 method.

  * Fix misplaced .htaccess file for debug logs, which prevented the additional
    themes preview cache files to correctly load into the backend theme list.
    DO NOT use this DEBUG OPTION on non-NCSA compatible web servers, like NGINX,
    which are NOT able to run .htaccess file(s) rules/restrictions!
    Don't forget: This WARNING effects also Serendipity in total.

  * Add a third parameter to serendipity_printEntryFooter() entries API
    for new comments_by_author limits.

  * No-s9y-Sync for "allow SVG files in Media Library", since that opens XSS
    vulnerabilities.

  * Introduce new $serendipity['CBAfetchLimit'] variable (default: 10),
    to have an independent limit rule for comments_by_author archive pages.
    The entries $serendipity['fetchLimit'] is historically a kind of "subset"
    of the $serendipity['RSSfetchLimit'] limit (default: 15), which is the
    "default" value in the RSS world. In Blog entries, page limits by 15 can
    get quite long, so users might set this value down in their configuration
    settings. You are now able to set your own CBA limit in your local.inc file.

  * Add contactform hooked plugin message hiding selectors to the default/
    style_fallback.css file. These (new) selectors were introduced in
    Styx 2.1 ~ February 2017- see 3f5bdba.
    You might need to change YOUR themes "plugin_contactform.tpl" and
    "plugin_dynamicform.tpl" templates files to support this.
    Mentioned ["timeline", "default-php", "bulletproof"] templates were fixed.

  * Trust logged-in CHIEF and ADMIN USERLEVELs to set already approved
    comments.

  * No-s9y-Sync for "INSTALL_SUBSCRIBE default false value change"

  * Optimize MediaLibrary filter extension SQL-query performance for
    serendipity_fetchImagesFromDatabase() requests.

  * Fix gallery filter mime image selection to only allow images

  * Do not allow backend template comment reply to non-approved comments

  * Fix (IM) command order compatibility with ImageMagick-7 versions.
    This also changed the $serendipity['imagemagick_thumb_parameters']
    example found in the serendipity_config.inc.php file.
    IF YOU already use it, check your settings!
    Additionally the bang (!) usage - for forced exact image sizes as
    defined, without minding calculating and rounding differences after
    comma, in escapeshellarg() - for WIN OS servers was fixed.

  * Media Library list item title names were changed from realname
    to diskname, which actually is the the real existing stored file
    name. The (origin) realname, if independently exists, is shown in
    the info layer as: "Origin: name".
    This was necessary to not have somehow confusing same titled
    item names in case of doublets.

  * Fix GET routing for /comments/pingbacks/ archive pages

  * Sync Smarty 3.1.33-dev-5 bugfix updates

  * Fix importer issues with import result and user array checks


Version 2.5.0 (2018-05-15)
 ------------------------------------------------------------------------

  * Silence malformed comment mail() throwing a stopping Exception

  * Bugfix non-working s9ymarkup (plugin) asterisk-bold-tag conversion.
    If you now encounter any issues in your blog text or feeds, this most
    probably are words starting with an asterisk not meant to be a bold-marked
    word. These occurrences need to start with a slash, eg. \*.

  * Bugfix feed array keys to not include dots for Smarty template loops

  * Bugfix atom feed XHTML compliance for common unclosed HTML tags

  * Improve various themes: Distinguish trackbacks output in comment
    archive pages like "blog/comments/trackbacks/" in comments.tpl
    for the [default, default-php, bulletproof, 2k11, next] themes.
    - Adding trackback truncation-cut dots all over.
    - Add a new comments_by_author.tpl file for [skeleton, bootstrap4,
      clean-blog, timeline] themes.
    - Changed the next-theme default content/sidebar ratio width from
      62/38 percent to the #primary of 68% and the #secondary of 32% width,
      since a blog lives off its content.
      Also fixed in there the optional used Smarty plugin_category.tpl
      template files missed feed icon.

  * Fix 2.5-beta1 BCRYPT SYNC login password change for new users
    and new installation user.

  * Fix health check for Spartacus mirror https secured URLs

  * Fix a PHP update 7.0.x to 7.1.3+ and login COOKIE decryption failure
    to completely log-off behind the scenes to give access again.

  * Sync Smarty Security Update to 3.1.32-dev-46 and
    sync Smarty 3.1.32 Release ===== (24.04.2018).
    Sync Smarty - bugfix last Security Vulnerability bugfix
    (sets version to 3.1.33-dev-1)

  * Fixed bug in merged pull request #392 which overwrote user specified
    input for logged in authors with an empty realname (wrong array
    key name) and deleted all existing text input

  * Sync [s9y] bootstrap4 theme to Bootstrap 4.1.0 update


Version 2.5-beta1 (2018-04-19)
 ------------------------------------------------------------------------

  * Minor fixes for the upgrade task list (and bump version to 2.5-alpha3)

  * Added a new personal configuration option to allow HTML comments.
    This supports:
      - the Backend comments list, edit forms and previews,
      - Frontend related entry comment views,
      - Frontend archive /comments/ like lists,
      - but does not touch comment feeds.
    Since not as strict as permanently converting all comment data to display
    plain text only, this needs CHECKED comments!
    THIS IS IN YOUR PERSONAL AND BLOGGERS INTEREST ANYWAY!
    The main logic behind this HTML option does restrict markup admission
    and tries to sanitize any injection as much as possible. But since you
    never know about hackers cleverness, this needs yourself KEEPING AN EYE
    on it.
    BESIDE THAT, this option now allows coding example parts in comments, and
    comments generally displayed more nicely. This is why it has a dependency
    to the WYSIYWG Editor option enabled, so that you can use the CKEplus
    plugin with (highlighted) code snippets.

  * Be a little more friendly to middle screen sizings in the Backend

  * Changed styling for the standard theme "2k11" post comment owner
    without the "self" box being border-boxed and colored.
    Added a slightly different approach in "next" theme too (#58422a8).
    Check your copy themes for changes in style.css and comments.tpl files.

  * Use better toggle closing icon for listed open/close fulltext buttons.
    And enhances the hovered tooltip (see Backend comment list).

  * Fix bad interpretation of the isolation tag option of the nl2br plugin.
    Please review your settings on upgrade!

  * Fixed preview of Backend comment replies for multi depth comments

  * Make themes webfont use optional (clean-blog, skeleton, timeline)

  * Added new "legal" plugin property bag attribute to indicate
    impact for the General Data Protection Regulation (GDPR / DSGVO),
    associated with the serendipity_event_dsgvo_gdpr plugin.

  * Syndication: Set subToMe service default option OFF to prevent
    issues with GDPR / DSGVO.

  * Add Spartacus fallback mirror if no matches (not Styx related)

  * Extend PHP 7.1.3+ login crypt using STRONG Galois/Counter Mode.
    Added important upgrade note and set version up to 2.5-alpha2.

  * Fix SQL compatibility for creating of table "serendipity_groupconfig"
    MySQL 5.7 - Strict mode - All parts of a PRIMARY KEY must be NOT NULL; ...

  * Upgrade bundled SimplePie Library to 1.5.1 (dev-1.5.2)

  * Remove old Smarty2 BC mode wrapper methods

  * Sync [s9y] and fix new bootstrap 4 theme

  * Replace PHP 7.2 set deprecated each() usage where possible

  * Cherry-pick Update PEAR.php

  * Fix path variable name in hook backend_sendcomment

  * Sync [s9y] and fix new NL2P OPERATION mode with the nl2br plugin

  * Themes: Convert old serendipity message styles - notice green to blue
            At now all success Frontend message selectors where changed
            from .serendipity_msg_notice to .serendipity_msg_success for
            consistency.
    PLEASE NOTE:
            Adapt this to your copy or Spartacus themes !

  * Fixed message error CSS class in next theme

  * Bugfix (local) plugins without propbag groups not showing up

  * Allow to ~hide~ (in-/active) pending comments, if you do not want
    to approve nor delete a comment, but do not want to get a pending notice
    about it every time you enter your Backend.

  * For quick MD5 unique hashes we seed the Mersenne Twister Random
    Number Generator overall.

  * 2k11: New Backend icon font build

  * Change commentlist moderate on/off buttons

  * Fix next theme calendar group & styles

  * Fix Persian mktime issues with PHP 7.0.0, since the "is_dst" parameter
    was removed, which was already set deprecated since PHP 5.3.0.

  * Sync Smarty Update to 3.1.32-dev-45 (including the Styx patch)

  * Raise minimum requirement of PHP version to 5.5.0 plus.

  * Move from SHA1 to BCRYPT for login password salted hash storage.

  * Remove old PHP4 and API Smarty2 methods in template_api.inc

  * Fix PHP 7.2 assume uninitialized charset constant warning

  * Add missing set $serendipity['GET']['commentMode'] via GET routing

  * Update external lib: random_compat to 2.0.11

  * Set default Standard Backend 'template_backend' to Styx (2styx)

  * Re-integrate category ID-Number to Backend category edit button tooltip

  * Fix to autosize PLAIN EDITOR toolbar buttons for Backend entries

  * Re-add underline button to PLAIN TEXT Editor toolbar for Backend entries

  * Update Backend additional links

  * Fix rdf feed Styx generator identifier

  * Sync Smarty Update to 3.1.32-dev-38 (including the Styx patch)

  * Add nav $template_option.use_corenav check to the next theme

  * Fix and extend spamblock maintenance multiselectable selection

  * bundled-libs: Remove deprecated old NET/ lib files

  * db: Remove deprecated dl() method in sqlite DB layers

  * bundled-libs: Remove deprecated old HTTP/Request library

  * Optimise MediaLibrary filter date ranges label for length

  * Bugfix MediaLibrary error "Image (link) could not be loaded" for
    non-type-images.

  * Fix maintenance task clearCompiledTemplate() first parameter not
    being used (as of cache) and return 0 or Smarty regression bugfix.


Version 2.4.0 (2017-11-17)
 ------------------------------------------------------------------------

  * Fix mediafilter input width for HTML5 browser date picker interface

  * Regression fix for the plugin-multi-updater activity spinner

  * Optimise entryproperties custom field option textarea row size

  * Make nl2br implication note translatable per plugin constant

  * Spartacus optimizations, like removing netmirror and some review
    and clarification to option descriptions.

  * Exceed the time limit when performing plugin upgrade tasks with sqlite

  * Check for remote ChangeLog file in plugin upgrade cases, where
    temporary session stored data has timed out.

  * Add missing pdo-sqlite query check to serendipity_plugin_archives

  * Removed core plugins to (additional_plugins) Spartacus repository:
    - serendipity_plugin_creativecommons
    - serendipity_plugin_templatedropdown
    - serendipity_event_creativecommons
    - serendipity_event_gravatar
    - serendipity_event_responsiveimages
    - serendipity_event_templatechooser
    - serendipity_event_textile

  * Added cleanup and log maintenance task for database added logs to
    the spamblock event plugin. The action is still taken in the
    maintenance section. (Please note, a continuously visitors table
    cleanup will take effect with the next statistics plugin update.)

  * Removed maintenance widget plugin, serendipity_event_cleanspam.
    (see follow-up)

  * Sync Smarty Update to 3.1.32-dev-35 (including the Styx patch)

  * Regression fix for the maintenance task call to clear Smarty compiles

  * Changed the option named like "Check entrytitle" in the spamblock event
    plugin to be SET default true for new installs, and to check the Blog
    title in combinations with entry title, often used by BOTs.

  * Bugfix and enhancements for the cleanspam event plugin

  * Fix UTF8MB4 migration logic dbCharset issue
    (already backported to beta1 zip)


Version 2.4-beta1 (2017-10-09)
 ------------------------------------------------------------------------

  * [-strike- Add new maintenance widget plugin, serendipity_event_cleanspam.
    This cleans up up-blown database spamblocklog or visitor tables by items.
    Activate in your plugin-list and force cleanup on demand.] (see follow-ups)

  * Prepare for translatable ['summary', 'description', 'backenddesc']
    strings for the themes info.txt file info layer.
    Translated language strings are stored as arrays in lang_info_xx.inc.php
    pattern files, depending the used language in $serendipity['lang'].
    They either live in the themes root or the themes /UTF-8 directory.
    Convert or save as ANSI (ISO-8859-1), your native charset, or for the
    latter as UTF-8 w/o BOM.
    All core delivered themes with these additional info strings were
    changed for [en], [de] languages.

  * Fix skeleton theme author value, since a colon is a reserved
    delimiter in the info.txt file. Always use the entity "&colon;"
    for it!

  * Revert utf8mb4 sql-indexes for non-mysqli installs due to errors.
    SQLITE3 is able to use this extended Multibyte support already
    without any changes, if compiled with Unicode and intl support.

  * Fix plugin_api non-production install empty value check error
    for plugin sort order incrementations.

  * Added simplified standard comment templates to Backend, for future
    independent Backend purposes.

  * Lots of smaller optimizations for the lang constants

  * Disable maintenance 4th rebuildThumb radio option if not required

  * Set minimum required PHP version to 5.4+

  * Add addData $target link to the 'images backend_media_makethumb'
    hook, to support the responsiveimage event plugin.

  * Add (non-activated) responsiveimages event plugin, which creates
    an easy way for authors to upload images and make Serendipity
    automagically create specific thumbnail sizes for the browser to
    choose.
    A templates config could then preset valid thumbnail sizes, like:
        $serendipity['responsiveImageThumbnails'] = [1440, 960, 480];
    and
        $serendipity['responsiveImageBreakpoints'] = [1920, 1360, 720];
    or just use the default sizes, which are [1200, 800, 400] for the
    first, and [1600, 1200, 600] for the second, by now.

    This plugin then parses every entry to display via the
    'frontend_display' hook, to convert an img src path to the preset
    srcset-path sets.

  * Secure image hotlink check by pattern

  * Fix Smarty 'from' assignment in serendipity_admin_image_selector file

  * Added new maintenance "Rebuild Thumbs" option task, to convert old
    named thumbSuffix images in the database for the images, entries,
    entryproperties cache and staticpages tables and the real files in
    the /uploads file system.
    This actually is only a particular need, if you are forced to
    rebuild every existing thumb.

  * Disabled header and footer plugin hooks in media_showitem.tpl
    [default, 2k11, default-php] templates, since they often use jQuery,
    which isn't set here. This template is used for image output cases
    of the serendipity_admin_image_selector.php file only.

  * Changed serendipity_fetchImages() API method for selecting the
    current image list. This removes some deprecated properties and
    adds a reverse property to get all old thumbSuffix named URLs only.

  * Fixed serendipity_fetchImages() list for changed/multi thumbSuffixes
    removals.

  * Add new API function serendity_contains() for strpos iterations

  * Fix file and filedir renaming actions for the thumbnail SUFFIX name,
    to keep a previous set SUFFIX in case the global configs thumbSuffix
    name has changed.

  * Removed temporary added symbol_sanitize(), since the UTF8MB4
    migration is a success.

  * Change sequence order of the (no-default) dashboard_ticker widget

  * Treat imageselectorplus event plugin "quickblog" sized images
    out of the MediaLibrary Sync and the auto-thumbnail generation.
    Those files live a hidden life and survive parent removal actions
    in the MediaLibrary, which adds a new property action "Image Of"
    viewing button, if such file exists.

  * Remove empty logger *log files automatically within maintenance
    changelog task.

  * Fix missing media_showitems.tpl markup in [2k11]

  * Add logger debug logging to serendipity_makeThumbnail()

  * Optimise some default configuration values for new installations.
    One of it is the slightly shorter "styxThumb" image notation,
    another, the new database table default prefix is now "styx_".

  * [..marked for the upcoming beta: EXPERIMENTAL]
    Prepared utf8mb4 migration for MySQL database servers to allow
    an extended unicode usage, like for Emojis.
    (See http://getemoji.com/)

    The basic issue is that in UTF-8 we have about 1000 bytes in length
    for indexes. Due to UTF-8 this means we can use a character length
    of 333 characters (1000 / 3). With UTF-8 MB4 this is reduced to 250
    characters (1000 / 4). A single index is allowed to reach 767 bytes
    (191 characters). This means, wherever we recently used an index
    length of 200 or 250 or 255 we can now only use 191 bytes. This
    means, all indexes need adjustment before the charset of a table
    can be successfully changed. While this can be automated, the
    problem is that it is not easy to deduce the new proper key length,
    because in some tables, reducing an index could lead to failing
    unique key constraints.

    The migration has therefore been developed in two ways:

    1.) New Installations shall use utf8mb4 as charset on installation,
        if their mysql version matches. If not, UTF-8 will be used.
        The internal SQL key statements have been adapted to work with
        utf8mb4, also in the additional_plugins repository all created
        indexes were already adjusted.

    2.) Existing installations now get a maintenance task, with which
        they can convert to UTF-8 MB4. There are two steps; First the
        "simulation" which yields all SQL statements that would get
        executed, and second the "execution" of those statements.

    They both has been checked on some installations. Please read the
    info button instructions for the second, the maintenance migration!
    A full SQL backup is recommended.

  * Optimized placement of dashboards links and quicktip widgets

  * Changed lang constant files to better match Serendipity Styx on
    installations. This also fixed some other (~asian) lang issues.

  * Optimise PHP7 installer token

  * Fixed regression bug with Smarty variable parsing, which could
    lead to completely unset permissions when changing Serendipity
    groups configuration.

  * Optimized preview_iframe template files (default, 2k11, Next,
    Skeleton, clean-blog, timeline Bulletproof, and default-php).
    Please keep your copy-templates synced.


Version 2.3.0 (2017-09-07)
 ------------------------------------------------------------------------

  * Fix template and plugin requirement issues

  * Media: Enhance js finished done, when resized images before upload

  * Fix sqlite3.inc file to load the wrong lib if class does not exist.
    Also mark the dl() method in all sqlite db files as deprecated.
    This fallback will be removed in future releases.

  * Smarty Bugfix-Update to 3.1.32-dev-22 (including temporary Styx fix)

  * Optimise PINGBACK comments list margins

  * Link plugin documentation to new tab, if in POST context.

  * Replace timestamp format by the lang defined DATE_FORMAT_SHORT
    constant in the Backend comment list, since the hardcoded approach
    was not ready for all languages, in special for the strftime() month
    abbreviation.

  * Remove <html dir=""> attribute pointing to "rtl" languages in the
    Styx (2Styx) Backend themes index.tpl file, since that happens to
    swage certain html elements very badly into another, breaking the
    design, in special with floated elements. Serendipity is not well
    formed to fully support right-to-left handed languages, since the
    2.0 Series Backend rebuild.
    The 2k11 Backend theme still has it set, with the same issues, but
    is left alive, so you may switch Backend themes around for testing.
    Any competent help regarding element and browser handling is highly
    welcome!

  * Prepare Backend styles for bidirectional direction attributes and
    the bidirectional override element.

  * Fix an "obvious" bug/issue with the set/get mb_language() method,
    not expecting this wide range of $serendipity['lang'] by parameter.
    Please keep an eye on this for strange language things to appear!

  * Prevent to Log-Off when Modemaintain is set active, ... since you
    might forget about it. :)

  * Diversify plugin update from/to block list information by colour

  * Fix serendipity_imageGallerySelector_done() src file['realfile']
    preparation for hotlinked data. Extends [e7957d5].

  * Allow gallery selection page pagination, even if not recommended
    to have.

  * upgrader: Fix directory removal iterator for some special cases


Version 2.3-beta1 (2017-08-14)
 ------------------------------------------------------------------------

  * Fix MediaLibrary file['realfile'] preparation for hotlinked data

  * Fix hotfile linking with 'backend_image_addHotlink' to not use the
    tempfile name.

  * Enhance the new image gallery functionality as popup. Enables to quick-
    ly select image galleries to your entries, by PLAIN- or WYSIWYG-Editor
    entry toolbars. This approach uses a non-remembrance and hardcoded
    hideSubDirFiles option, to only show images by directory. Also this is
    limited to 48 items per view out of memory and performance reasons.
    Take care to give your MediaLibrary directories a better structure to
    fully support this new feature.
    This also fixed a bug with the wysiwyg toolbar stylesheet tweaks.

  * Rewrite some multi clickable identifiers semantically

  * Add gallery enhancement to WYSIWYG-Editor mode styles

  * Enhanced the new gallery, since in its simple form it was a single line
    gallery only, flexing the floated items in a single row.
    NOW all child containers, like comments, links or manually added generic
    div or span elements, have a maximum size of 260px in width. Even direct
    child image items have this maximum size set. This allows to put a bunch
    of floated MediaLibrary elements into this gallery, which nicely flow
    and break inside the entries space that is available in the theme itself.
    All recommended themes - delivered by core releases - (and default) were
    checked working fine with this or had to be slightly modified. (Next/default)
    You can still change or finetune this in your themes stylesheets.

  * Introduce a PLAIN-Editor "toolbar" button to support this gallery wrap.

  * Fix CKEditor WYSIWYG-Editor mode styles regarding image comments

  * Added an easy and global available image preparing class, called
    "serendipity_image_block", added to the style_fallback.css file
    and the wysiwyg mode editor screen.
    This new class allows to simply add what is called a "poor man's
    gallery" using inner serendipity_image_left or serendipity_image_right
    floated images in a row. Just enclose them with a generic container div
    <div class="serendipity_image_block"> ... </div>.

  * Add missing escape of the "$staticpage_pagetitle" var for all related
    template files in "clean-blog" and "timeline", some in "default-php"
    and the "plugin_staticpage.tpl" file in the "next" theme.
    Please keep your copy-templates synced.

  * Added serendipity_comment_author_self class to the "next" theme

  * Allow dashboard plugup widget to fade away when empty (alike the
    dashboard_ticker in non-standard widget mode).

  * Smarty Bugfix-Update to 3.1.32-dev-19 (including temporary Styx fix)

  * Prepared Styx additional_plugins to remove old HTTP/Request(1) PEAR
    lib in next Styx version.

  * Restrict edit and reply actions to type comments only in the Backend
    comment list.

  * Fixed default theme typo bug, added by trackback escapement commit

  * Convert debugging to use the debug $serendipity['logger'] option
    for the MediaLibrary and trackbacks APIs, and in Spartacus for
    remote URL requests. They still have to get enabled via "local"
    functions adhoc debug true settings to start their logging.

  * Set and add remote ChangeLog / documentation links for
    upgradeable plugins.

  * Fix the plugin package xml for the remote raw changelog path
    and enhance the xml creation to better indent directory/files.

  * Fix an old MediaLibrary synchroniser bug with "virtual" hotlink data,
    to not auto-remove such items from the image database table, when
    accessing the imageList generator to re-/build the MediaLibrary.
    UPGRADERS PLEASE NOTE:
        If you ever used this feature in the past, and added
        MediaLibrary linked hotlink image data in your entries,
        and then lost your MediaLibrary hotlink item by this syn-
        chroniser bug, the entries added media ID,
        ie. "<!-- s9ymdb:102 -->", is now wrong or misdirecting.
        This is just bad in those cases, where some other task is
        requesting it and might get into trouble with the false ID.
        Check your entries for this issue.

  * Restrict public server access to $serendipity['logger'] log/* files
    in the compile dir. This shall be allowed only via the authorised
    access 'external_plugin' route. See maintenance changelog section.

  * GIT: Update .gitignore file to allow subdirectory based .htaccess files

  * Sync [s9y] - Adapt .htaccess default rules to exclude rewriting plugin
    documentation files (Issue #521).

  * Fixed regression bug for HOTlinked media items and the hideSubdirFiles
    true option in MediaLibrary BASE_DIRECTORY cases.

  * Refactor serendipity_moveMediaDirectory() to be a serendipity* API
    wrapper for _renameDirAccess, _renameRealFileName, _renameRealFileDir
    and _moveMediaInEntriesDB API functions, since grown too big, which
    was error prone.
    You have to use the wrapper for accessing these new split-up functions.
    This also adds some debugging via DEBUG logger option and optimises
    this and that.

  * Fix MediaLibrary file rename entry replacements

  * Fix SQL path REGEX matching media thumbs for the directory dir type
    only, which fixes the matching entries and the counter.

  * Fix path handler for the media-directory-form renaming existing
    directory names.

  * Fix PHP7 Exception call in Cookie based login failures

  * Add new Serendipity Smarty modifier "|cleanChars" for cases, where
    chars like dots, bangs, spaces, ... which are not (A-Za-z0-9_-)
    break the expected behaviour. Already used in the Backend to fix
    broken info button cases by certain plugins.

  * Remove category filter in Backend entry form for categories non-popup
    compact mode.

  * Add some styled love to comments/trackbacks/pingbacks section in the
    "Next"-theme as an example. Thanks to Grischa Brockhaus! :)

  * Fix old bug, missing the links "comment url" in the "comments.tpl"
    template file, when called by "/comments/" or "/comments/trackbacks/"
    or "/comments/comments_and_trackbacks/" etc. page archives, via the
    comments_by_author.tpl template file. All relying themes [2k11,
    bulletproof, clean-blog, default-php, default, kubrick, next, timeline]
    were changed.

  * Optimise FRONTEND COMMENTS for logged-in users. They now are able
    to "multi-comment" without page reset in the "entries.tpl" template
    file. The "2k11" and the "next" theme were changed to support this.

  * Optimise PINGBACK markup generation checkup in the "trackback.tpl"
    template file, by checking a possible non-empty body variable
    starting with an image.
    This issue probably is added by the gravatar event plugin only.
    The "2k11" and the "next" theme were changed to support this.

  * Finalise 'stable' over 'beta' preference autoupdate check

  * Fix the autoupdate final "return to backend" link


Version 2.2.0 (2017-06-23)
 ------------------------------------------------------------------------

  * Rewrite Trackback HTTP Requests and logging attempts
    Possible logging may get enabled by hand in comments.php and by the
    "Log Level": "Debug" option in the General Configuration.
    This may change in future, to only support the latter.

  * Revisited the "TRACKBACK_SPECIFIC_ON_CLICK" constant to clarify
    trackback and trackback URI link usage.
    All depending themes in core where changed and set to a new
    date: 2017-06-21. Most languages already translated in the past were
    reset. "EN" and "DE" are up to date. Translators welcome!
    Please check your themes "entries.tpl" file for the change.

  * Fixed wrong logic checking moderation and unset emailing options
    for Comments and Track/Pingbacks. NO set "Send [..] announcements"
    in Personal Preferences really means NO EMAIL.

  * Spend some love to Backend comments list for a better distinction
    of Comments/Trackbacks/Pingbacks.

  * [Security]: Extend Modemaintain Plugin for security

  * Optimise Maintain section messages

  * Add temporary Serendipity bugfix for Smarty modifier compiles

  * Update this NEWS file documentary for the MySQL full unicode
    implementation "bug" down below by a marked "JUNE 2017" part.

  * Sync [s9y] and enhance: Add "backend_view_entry" hook, that is executed for
    every entry in the Backend entry list.

  * Sync [s9y]: Emit and detect rel=trackback element to find trackback
    url, to have a reliable alternative to RDF used so far.

  * Bugfix upgrade to Smarty 3.1.32-dev-11

  * Sync [s9y]: Updated entryproperties plugin to support a custom property
    for multiple ownership of an article.

  * Improve the Dashboards "no default widget" option, to show shortcut
    links and amounts of comments approval, future or draft entries.

    EDITORS NOTE:
        DRAFT set entries should really be used some day, published
        or rewritten with a new date and NOT kept forgotten!

  * Update simplepie library to v.1.5. Requires new file name to call:
        require_once S9Y_PEAR_PATH . 'simplepie/SimplePie.php';

  * Add random_bytes() and random_int() polyfill for PHP5, which is used
    for the author token hash to use the best and most safely available
    random generator for Integers and Strings in PHP.

  * Fix some more PHP 7 errors and fix some default-php theme templates

  * Added a new "view" type 'entries', in case the Blog entries list is
    not the actual startpage. This is with a staticpage set to be the
    new 'start' page of your Blog. The Smarty {$view} variable would
    then be the same for the entries list and the new staticpage
    "startpage" and you would have had to check this by eg.
        {if $view == 'start' AND $staticpage_pagetitle != 'startpage'}
    or anything similar, depending the case to check for.
    In this static page case, the entries list since ever is called by
    GET "/?frontpage" or "index.php?/frontpage" requests.

    This exactly is the case where "view:start" changes to "view:entries"
    for the list, eg {if $view == 'entries'} in your theme.
    Please check your themes index.tpl file for possible conflicts.
    All core delivered themes have been changed accordingly.
    If you don't use the staticpage start (page) option, you have no need
    to change your theme immediately.

  * Allowed <p> tag custom classes in ckeditor js config to the
    Extra Allowed Content protection against ACF.

  * Smartify quicksearch form by option (default false).

  * Optimise visual highlight of installed plugins, including those
    being installed and stackable, in lists of installable plugins.

  * Fix the experimental core cache option by recognising more states.
    This removes the second part of this code, the cached html output,
    and focuses on its first part, the internal cache to not repeat
    specific database queries.
    PLEASE see this still as an EXPERIMENTAL approach!

  * Fix spamblock Akismet API request Error

  * Change default value for "use_autosave" to false

  * Merge Smarty 3.1.32-1: Fix compiling isset() and empty() functions
    for differing PHP behaviour since PHP 5.5.

  * Sync [s9y] and fix:
    Added secure installer with a token, manually created inside a file.
    This is to prevent unauthorized installation access at the very
    moment of install. Just follow the guided steps!

  * Enhance search request results on installable plugins.
    Remove plugins_installable group head names, if no inner element
    was found to display by the javascript search routine.

  * INFO:
        - Safety first. Admins are strongly requested to use the new
          modemaintain plugins "503 maintenance mode", when performing
          upgrades to the Styx system. This will keep everybody away
          until the upgrade and the upgrade tasks have run through
          with success!

  * Due to longstanding networking issues with netmirror.org, the
    default mirror of the Spartacus plugin was changed to use github.
    This will not touch Styx, since it uses the custom Styx github
    mirror by default.

  * Fix odd Chrome line break issue with MediaLibrary item titles and
    the multi form_check box.

  * Sync [s9y]: Fix comment preview for logged-in user overwriting user data

  * INFO:
        - No s9y-sync for adding a "delete" button to the Backend entry form.
          Styx does not want to overload the entry form with tasks that
          can better be done in the entry list.
        - No s9y-sync for including the PEAR Net/DNS2 lib. Currently it seems
          ridiculous to add a 84 file lib, while some old plugins are out
          of date. See: serendipity_event_spamblock_(rbl/surbl).

  * Sync [s9y]: "Suppress empty groups in plugin list" issue, which only
    matters with the Serendipity origin additional_plugin repository.

  * Make Backend page tab title order configurable.
    The default (tab) title of Backend pages in Styx is in this order:
        "section | $admin | blog title"
    You are now able to change the order to "blog title | section | $admin"
    by adding "$serendipity['backendBlogtitleFirst'] = true;" to your
    serendipity_config_local.inc.php file.
    [Post Scriptum: Or use the Backend template approach. See the Styx
     Backend theme info layer.]

  * Minor changes to staticpage breadcrumb regarding separator spaces
    in all themes and staticpage templates files which use "$crumb".
    Please keep your copy templates synced.

  * Fix non accessible SQLite database without notice issue (#427).
    A forced check now is announced to the Dashboard after login.

  * Fix themes entries.pl:
    Do not allow to echo NO ENTRIES TO PRINT if view is a 404 page.

  * Enhance maintenance modemaintain (plugin) notification

  * Enhance and add maintenance (entryproperties) cache notification

  * PHP 7+ will now use random_bytes() for the author token hash, to
    generate cryptographically secure pseudo-random bytes. The older
    now seeds better with the Mersenne Twister random number generator.

  * PHP 7+ will now use openssl en-/decrytion for the cookie based login
    authentication instead of the deprecated and outdated mcrypt library.

  * Fix wrong counting limitation to 4 drafts in the Dashboard, if no
    future entries are available. As already stated in the 2.1-beta1
    notes, there are variables available which can influence the
    Dashboard entry limit (default: 5).

  * Fix missing escapement in the "next" theme staticpage.tpl file
    array vars *.top.topp_name and *.top.exit_name.

  * Silence deprecated mcrypt_* login warnings with PHP 7.1.x ++
    versions until this will be replaced.

  * Add Backend theme admin/doc directory for Backend based lang
    documentary per template files, cached(!) by Smarty.
    The Dashboard Quicktip section uses it already.

  * [Security] Add and check CSRF token for setting themes

  * Core CKEditor: Allow ul tag styles & classes to protect against ACF

  * Fix non-asssigned Smarty var in upgraderResultDiagnose, thanks to
    Pascal Uhlmann (webcompas).

  * Allow the Dashboards autoupdate messaging to admin users only and
    check if the autoupdate plugin actually is installed.


Version 2.1.0 (February, 24th 2017)
 ------------------------------------------------------------------------

  * Fix the "SERENDIPITY_NEEDS_UPGRADE" page redirector to allow admins
    only. This keeps a 503 Maintenance Mode fully intact, until freed.

  * Allow Unicode searches for Chinese / Japanese like languages, see:
        https://board.s9y.org/viewtopic.php?f=4&t=15112
    This also helps when using the full Unicode approach described
    below in 2.1-beta1.

  * Add upgrade task to remove possible old compiler file leftovers
    in root of templates_c, caused by Smarty2.

  * Add upgrade task to purge empty directory leftovers in
    templates_c, primarily caused by Smarty.

  * Add entry language status to the entries list, if the multilingual
    event plugin is installed and actually used by entries.

  * Fix the ChangeLog for the charset symbol text issue.
    Please read about this carefully in the 2.1-beta1 changelog entry
    down below.

  * Add new Backend plugin grouper constants for group bag consistency.
    Changed:    'BACKEND', -> 'BACKEND_ADMIN',
    Added:      'MAINTAIN' -> 'BACKEND_MAINTAIN',
                'DASHBOARD' -> 'BACKEND_DASHBOARD'

  * Introduce a new html_nugget plugin option, to exclude a staticpage
    set startpage, if the staticpage plugin is installed.

  * Introduce new selector(s) to all theme "plugin_contactform.tpl"
    template files, delivered by core:
        "serendipity_staticpage staticpage_plugin_contactform"
    This enables to disallow plugin to form hooked messages,
    which don't make sense here. Example style via user.css:

        .staticpage_plugin_contactform .serendipity_comment_emoticate,
        .staticpage_plugin_contactform .serendipity_comment_gravatar,
        .staticpage_plugin_contactform .serendipity_comment_s9ymarkup,
        .staticpage_plugin_contactform .serendipity_comment_spamblock {
            display: none;
            visibility: hidden;
        }

    In some of these themes allowed only, if the plugin_contactform
    articleform option is set true.
    Please update your COPY-THEMES including this file!

  * Fix CKEditor default content styles loading

  * Fix plugin API save/preview event to not execute the DOM listener
    if $serendipity['use_autosave'] is not set.

  * Keep maintenance mode privateVariables on upgrade, since we do not
    want the public to access the update page.


Version 2.1-rc1 (January, 30th 2017)
 ------------------------------------------------------------------------

  * Add experimental Dashboard quicktip, bundled with the S9y link box.
    This is available within the forced embedded elements option only.
    New installs have this already set by default in Personal
    Preferences.

  * Add experimental modemaintain plugin, activated on install.
    Upgrade Admin Users have to install it manually via plugin list.

  * [Security] Fix missing integer casting for inserting new categories
    (thanks to cdxy)

  * Spamblock fix for the missing captcha generation in combo with the
    adduser plugin.

  * Disable adduserform hooked spamblock notifications via
    style_fallback.css

  * Add tag and category list anchors to edit_entry fieldsets

  * Disabled Selenium test files unless enabled

  * Various more Styx Backend GUI improvements

  * Fix issue #437 - Remove the hardcoded media filter only_filename
    input field and re-allow the $order_fields['i.name'], which (now)
    has the same partial search functionality in the filter panel.
    This sets "only_filename" deprecated.

  * [Security] Check for CSRF token when disabling/enabling comments
    toggle

  * [Security] Add comment deletion token check against CSRF,
    if is_entry_owner via comment.php

  * [Security] Redirection of comment.php now checks the referrer
    and only allows the Blog's host (thanks to Lee Sheldon Victor)

  * [Security] [#435] Secure HTTP_REFERER message, to prevent possible
    XSS in trusted area, thanks to Shinkurt

  * Cleanup of old and deprecated theme(s) admin files.

    FROM NOW ON, the Backends image fallback has moved to the "default"
    -theme admin directory.
    The serendipity_editor.js.tpl in "default/admin" and its dependent
    php files NOW are a fully available fallback stack file. Only some
    themes, like the STANDARD "2k11"-theme" or the "default-php" theme
    will fetch their own file occurrence.
    This all AND the revision for responsiveness corrects the "default"
    -theme to occur as something outdated, or no longer in common and
    restores the original weighting.

  * Touched all preview_iframe template files again for error message
    markup.

  * Allow to set a default category for authors (personal preferences)

  * Changed how the hidden password element is displayed to prevent
    browsers from autofilling it into the entryproperties plugin

  * Fix MediaLibrary image popUp dimensions not equal file dimensions

  * Fix MediaLibrary image scale return to show up the tools
    metaActionBar


Version 2.1-beta-3 Styx (December 19th, 2016)
 ------------------------------------------------------------------------

  * Upgrade to Smarty 3.1.31

  * Various Styx GUI improvements

  * [Security] - See 2.0.6 Note:
    Security bugfix to escape dbType parameter on first installation

  * Fix pubDate and add the better S9y logo to the RSS outfile

  * Revisited the old "default"-theme and its cloned "default-php"-
    theme for mobile first responsiveness, without a total rewrite,
    keeping the origin simplicity.
    The old default index.tpl file was backported to the dependency
    themes (blue, idea and default-rtl). COPY-THEMES, based on them,
    need to include this too.

  * Add upgrade task (again) to rename internally used plugins for the
    stable Styx release

  * [s9y] Synced/Added new API wrapper serendipity_request_url() to request
    URLs for compat. Styx plugins currently still use the simpler Styx
    approach.
    Core Image hotlink requests do now support this new API method.

  * Fix #430 RSS set email by config, thanks to fugue88

  * Smarty bugfix and optimization update to 3.1.31-dev/47

  * [Security] - See 2.0.5 Note:
    Enhanced media upload check to also check redirects for local files

  * [Security] - See 2.0.5 Note:
    Prevent XSS in adding category and directory names

  * Add back button to scale image page

  * Fix BASE_DIRECTORY option in case of hideSubdirFiles

  * Fix extended filter action buttons shown when no entries available

  * Fix plugin API instance token

  * Fix installer iconfont issue

  * Add Styx Backend template example index,  which enables to suppress
    the Serendipity and PHP version information and assets for unlogged
    users.

  * Partial Sync [s9y] - flexbox Backend solution

  * Sync [s9y] core iconfont accessibility fixes

  * Fix and optimize Plugin description

  * Fix and optimize "default-php"-theme empty preview call

  * Bugfix update to Smarty to 3.1.31-dev/32

  * Enhanced themes info.txt descriptive notes

  * Added example Styx BACKEND theme

  * Optimized preview_iframe template files (default, 2k11, Next,
    Skeleton, Bulletproof and default-php)

  * Update CKEditor to 4.5.11 and extend with the autogrow plugin,
    which allows a flexible size of textareas.


Version 2.1-beta2 Styx (September 26th, 2016)
------------------------------------------------------------------------

  * [Security] - See 2.0.4 Note:
    Prevent moving files by using their directory name.
    Possible SQL injection for entry category assignment.
    Possible SQL injection for removing & adding a plugin.

  * [Security] - See 2.0.4 Note:
    Add new configuration option to enable fetching local files for
    the media uploader. By default this is now disabled to prevent
    Server Side Request Forgery (SSRF).

  * Added redirector message for "Page not found".

  * Added new theme "Skeleton".  Skeleton is a responsive, mobile first
    HTML5/CSS3 theme built on the Skeleton framework.

  * Update to Smarty 3.1.31-dev/23

  * Added two API functions for strpos() array needles and
    debugging referrer parent level function name.

  * Fix bug in get URI arguments where uniqueness is bad

  * Send fatal errors to the Serendipity Exception handler

  * Fix compatibility bug preventing Internet Explorer (+Edge) to
    clear the entry editor autosave cache when saving an entry.

  * Sync some Smarty bugfix updates 3.1.31-dev/12

  * Add all RFC 2616 methods to the serendipity REQUEST2 wrapper


Version 2.1-beta1 Styx (September 3rd, 2016)
------------------------------------------------------------------------

  * Added serendipity_comment_author_self class to standard 2k11 theme

  * Converted all core release themes to use Smarty3 syntax

  * Touched template files "plugin_staticpage_*" in 2k11, bulletproof
    and Next theme to support the new navigational structures of
    Staticpages v.5.x.
    Clean-blog and timeline need some review from its author.

  * Fixed and enhanced comments.tpl vars via comments_by_authors.tpl
    template file to get proper results for "*_self" class issues, since
    outside of entries.tpl scope.

  * Fixed Smarty $entry scope for comments.tpl "*_self" class issues,
    in entries.tpl to {assign var="entry" value=$entry scope="root"}
    for proper propagation of $entry to "sub"-templates.
    PLEASE UPDATE your theme or custom template copies!

  * Restrict comments author names a little more

  * Fix Backend commentreply by adding an admin template (d2b1dd9c)

  * Fixed routing refactoring for uri argument checks on comments page
    pagings, and multiple others before, like multiauth and multicat,
    week and archive path, or categories rss match and lots of older
    uri fixes.

  * Re-integration of two very unique themes, which are default-php and
    default-xml. Both were reworked for Serendipity 2.1 Styx Edition and
    particularly in case of the PHP-theme heftily extended with all kind
    of other template files. Both themes use the core included
    include/template_api.inc.php file as an emulator class for the still
    overall used Smarty engine. The XML-theme is meant for Blog output
    as XML for XML-Readers. The PHP-theme is meant for all Blog
    Administrators to use or create a ("Smarty independent") PHP-theme
    only.
    The theme preview files just advert to the fallback usage binding of
    the default-theme stylesheet style.css file. In case of the PHP-theme,
    you may just want to create your own. The PHP-theme may also still
    miss some plugin template files and the XML-theme may still have some
    minor issues in the Backend.
    You are very welcome to help making this more bulletproof!

  * Fixed an old issue with the default fallback template not reading the
    full serendipity_editor.js.tpl file. An already parsed fallback was
    added and updated, as well as a PHP parsable file, which is only used
    by the XML-theme.

  * Removed composer for ckeditor, since being a library which requires
    maintaining. This moved the whole library path one directory up.

  * While developing Serendipity Styx Edition, some minor UI styling
    enhancements in the Backend all over have been added or changed.

  * Update Smarty lib to Smarty 3.1.31-dev/4 since the release version
    had a compiling issue that could hit Styx on upgrade

  * Allow maintenance log view plugin to delete old log files

  * Upgrade core CKEDITOR lib to ckeditor_4.5.10_full

  * Add Backend comments list first / last pagination buttons

  * DEV-NOTE: enabling Zend-Db in include/db/db.inc.php is still marked
    EXPERIMENTAL, since having known issues.

  * Fixed serendipity_db_in_sql() function in generic wrapper file with
    Zend-Db adding bloat to the query part, trying to be smarter.

  * Removed Text/wiki lib from bundled-libs to be included to the wiki
    plugin instead of bundled within the core

  * Fix Zend-Db (mysql) exception issue with Serendipity using CAST(expr AS type)
    type conversions on issueAutologin() and commentSubscription DELETE
    queries.

  * Removed old executable composer.phar file from Serendipity root.
    This saves some Bytes and was never actively maintained!
    Developers may just drop their own fresh executor by hand.

  * Fix another Zend-Db issue adding a wrong key for the Smarty
    $totalEntries assignment

  * Fix serendipity_db_limit($offset, $limit) paginator function in the
    Serendipity generic wrapper file for Zend-Db, which had issues with
    Serendipity SQL offset-limit-string query parts within all Zend-Db
    2.2.x versions.

  * Update Zendframework Zend-Db to version 2.2.10 to fetch at least
    some security flaws in old 2.2.2 package
    (This too without touching composer and old json files)

  * Allow the Maintenance - changelog widget to also open up log files,
    set with $serendipity['logger'].

  * $serendipity['logger'] - fix logging encoding when using constants
    (currently only Spartacus and a critical database logging effected)

  * Update psr/log and katzgrau/klogger libs to current masters
    (without touching composer)

  * Moved Backend comments action-bar to the right

  * Update Smarty lib to Smarty 3.1.30 release.
    See change notes in Smarty 3.1.30-dev commit note down below.

  * Changed Personal Preferences popup-window/force-popup option
    constants to better reflect the embedded mode for some elements

  * Changed weight and iconize Backend comments shortened title line

  * Fix Backend comment bodies. Summary-truncation is now strictly set to
    120 chars and always showed stripped. Else, if comment.summary was
    stripped, allow excerpt button switch to comment.fullBody.

  * Add maintenance "serendipity_event_changelog" widget, active by core.
    Upgrade Admin Users have to install it manually via plugin list.

  * Fix WYSIWYG editor languages by changing the lang constant defines
    for WYSIWYG_LANG to the POSIX locale standard formatting of language
    tags, eg "en_US". This is better to handle than the IETF language
    Unicode standard tag eg. "en-US" using a dash.

  * Add and set a new global full path variable to the Spartacus plugin,
        $serendipity['spartacus_cachedXMLfile']
    to easily be able to nuke the current package_***_**.xml cache file,
    eg. within a possible plugin 'backend_plugins_update' redirector hook
    in need to exit the current upgrade runtime execution. This would
    reset any pending plugin version settings and their listing until
    next run. Thus it'd need a new xml cache file fetch.

  * Add theme engine information to the themes list info layer

  * Allow missing {$templatePath} Smarty variable globally set, to fix
    and extend the following issues:

    - If a theme has its own preview_iframe.tpl file, it needs to
      distinguish between the Backend theme with {serendipity_getFile ...},
        eg. {serendipity_getFile file="admin/js/modernizr.min.js"}
      and its very own files without using the fallback template cascade.
      These files can now be loaded locally by
        {$serendipityHTTPPath}{$templatePath}{$template}/***
      or http-wise with
        {$serendipityBaseURL}{$templatePath}{$template}/***
      and have been fixed for these themes:
        [ <next>, <clean-blog>, <bulletproof>, <timeline> ]
      within this release.
      For THEME-COPIES please remember, that files from <2k11> are
      "special", since being the standard $serendipity['defaultTemplate']
      template, which does not need this care.

    - If a Frontend theme needs to link, or includes assets which might
      be problematic using the template fallback cascade, it may now
      use these fully assigned path variables, eg. for the favicon:
        {$serendipityBaseURL}{$templatePath}{$template}/favicon.ico

  * Fixed <bulletproof>, <default> and <next> themes iframe_preview.tpl
    files not showing up correctly on mode: 'save' in the Backend.

  * Fix a possible <bulletproof> config loading error on theme change,
    regarding serendipity_plugin_api_event_hook already used.

  * Fix and simplify templates loop key chaining for latest Smarty

  * PLEASE NOTE:
    A while ago phpMyAdmin versions 4.0+ changed their behaviour for
    tables edit handling, for database tables not having a unique key.
    You now may edit or create the/a phpMyAdmin config.inc.php file for
    PMA versions from 4.5 and set:
       $cfg['RowActionLinksWithoutUnique'] = true;
    to be able to edit some of the tables used in Serendipity again.
    References:
    https://github.com/s9y/Serendipity/issues/341
    https://docs.phpmyadmin.net/en/latest/setup.html#manually-creating-the-file
    https://sourceforge.net/p/phpmyadmin/bugs/4963/

  * Add Plugin Update Notifier serendipity_event_plugup plugin

  * Fix upgrader to not run upgrade tasks for versions higher than the
    upgrade version.

  * Fix and set strict S9Y_PEAR_PATH . to all relative PEAR package
    requirements, due to requirement errors.

  * Add ability to set and download a custom Serendipity autoupdater
    download file and get notifications for this upgrade URL in the
    Dashboard. This adds a new config option to configuration - general
    settings.

  * Fix Spartacus plugin for custom mirror (GitHub) cases.
    This is currently used for plugin(s) cases only!
    Templates are fetched from the originated mirror(s).

  * Fix case $serendipity['short_archives'] SQL query fetch in
    serendipity_fetchEntries(), if a themes entries_summary.tpl file
    wants to use a body teaser.

  * Allow "title quoting" in Backend entries overview title link,
    but keep escaping for security, using double_encode false.

  * Fix issue (#340) - missing newly created entry id re-added back
    to entry form for follow-up submits of the same entry.
    Please check your template "preview_iframe.tpl" file to execute
    this code in the html head part:
+    {if isset($lastSavedEntry) && (int)$lastSavedEntry}
+
+        <script type="text/javascript">
+            window.onload = function() {ldelim}
+                parent.document.forms['serendipityEntry']['serendipity[id]'].value = "{$lastSavedEntry}";
+            {rdelim};
+        </script>
+    {/if}
+
    and remove the starting + signs.
    This issue is already fixed within the following pre-delivered
    themes: "2k11, default, bulletproof, clean-blog, next".
    Please make sure to update your themes "preview_iframe.tpl" file!
    This adds a native javascript delayed (lazy) load execution versus
    the previous used $(document.ready) and/or missing jquery loading.
    Now the iframe_preview tpl file really updates the entryform hidden
    serendipity[id] value for direct further-on-submits to that entry!

  * Partial fix a possible charset/symbol/database issue, that text
    after UTF8 'private use area' symbols was cut OFF on saving (#394).
    This partial fix applies to entry and comment bodies.

    SADLY, this depends to your (MySQL) Database, its version and also
    the tables/fields COLLATION settings. Even the maximum length of
    columns and index keys play an important role when changing this
    by Serendipity default. This is why we stick with we have for now.
    If you still want to use this better UTF8 support, you have to
    make your hands a little dirty and follow the here described
    procedure by 3 steps.

    PLEASE NOTE: This is about MySQL and old or false set charset
                 collations.

     1. The (old) MySQL utf8 encoding is awkwardly named, as it is
        different from proper UTF-8 encoding. Check up your version.
        MySQL 5.5.3 (up from 2010) introduced a new encoding called
        utf8mb4, which maps to proper UTF-8 and thus fully supports
        Unicode. If it is not set to "utf8mb4" by default, you should
        change it generally by this command:
            ALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf_unicode_ci;
        Because of the Serendipity tables unchanged columns length and
        indexes (*), we stick to "utf_unicode_ci" and do NOT use
        COLLATE = utf8mb4_unicode_ci; here.

        (*) The MySQL UTF-8 character set actually only supports 3-byte
            characters. This leads to a maximum limit of 765 byte indexes.
            However, the utf8mb4 character set and utf8mb4_general_ci
            collation introduced support for 4-byte characters, and thus
            the full set of UTF-8 characters. This is when we hit length
            errors, since the new maximum index length on a VARCHAR(255)
            field becomes 1020 bytes for example. It would need to be a
            VARCHAR(191) to stay below the 767 byte limit. As you can
            see here, this is NOT trivial to change and error prone, to
            be that robust as it has ever been.

     2. To set the connections COLLATION to "unicode" instead of
        "general" you have to convert these tables by using "SET NAMES
        ... COLLATE ...".
        You only need to use this better "utf8_unicode_ci" collation
        for special characters sorting (*), otherwise you can stick to
        use the old "utf8_general_ci", which is slightly faster as the
        manual says. This only is relevant to the tables which actually
        store (utf8) text data, like *_entries, *_comments and
        *_entryproperties, *_staticpages, etc.
        Example for the changes:
            ALTER TABLE `s9y_comments` DEFAULT CHARSET=utf8 COLLATE utf8_unicode_ci;
            ...

        By default a new Serendipity (UTF-8) installation should already
        be set to use the "utf8_unicode_ci" collation.

        (*) Likewise =ss; utf8_unicode_ci uses the Unicode Collation
            Algorithm as defined in the Unicode standards, whereas
            utf8_general_ci is a more simple sort order which results
            in "less accurate" sorting results.

     3. At last, the Serendipity "Configuration / Database Settings /
        Enable DB-charset conversion" option must be set to "No" to
        allow this to work!
        This also is the recommended setting, if you want to allow
        (full) unicode symbols at all. You may face encoding issues with
        old entries now. Check them up and try to save them again. Also
        regard possible cached entries via entryproperties.

    THE TRICK, in short:
        Without these mentioned database changes, the S9y option change
        set to "no" would just produce wrong encoded Umlauts/UTF-8.
        In the old days of changing from native latin1 to utf8 charsets,
        this option, per Serendipity default set to "yes", enabled to
        workaround a bunch of possible errors.
        The changes in the database in step 1 + 2 now enable us to NOT
        face the cut OFF text issue after these symbols any more.
        The unset Serendipity option, NOT to use SET NAMES, enables a
        better automated, modern handshake between server and database.
        At this point, these characters and symbols are actually stored
        in native UTF-8, eg. ''+'' for "".
        But since there are way too much possible settings/issues
        around, which may play a role, and not have been mentioned
        here, please see this approach as "EXPERIMENTAL" and at your
        own risk!

        PLEASE NOTE (JUNE 2017):
            There may be a better solution, updating the Serendipity table
            collations with recent mysql versions. This is supposed to come
            with upcoming Styx 2.3+, since that needs some very deep cared
            testing.

        For more about this in general, read:
            https://mathiasbynens.be/notes/mysql-utf8mb4

  * Updated some bundled libs to better support PHP 7

  * Update entryproperties grouping grid option boxes. Please configure
    the sort placed options in the "Entry editing screen" to fit nicely
    into the Backend entries entry form.

  * Update the spartacus_remote url option to support a hidden
    (obfuscated) URI for the serendipity_event_plugup plugin, which adds
    an upgrade note for Spartacus plugin updates to the Dashboard.

  * Restrict category author permissions

  * Set a new option to "personal preferences" user options, to show
    no default widgets (draft entries and comments) in the Dashboard.

  * Fix an old bug with {serendipity_showPlugin
    id="serendipity_plugin_freetag:<the-hash>" side="right"
    negate="true"}
    in the functions_smarty.inc file, since the parameter
    $params['negate'] had never being read and returned correct.

  * Add Smarty 3.1.30-dev and rework the functions_smarty.inc file.
    Smarty 3.1.28 introduces run time template inheritance *
    Read the NEW_FEATURES and INHERITANCE_RELEASE_NOTES file for recent
    extensions to Smarty 3.1 functionality

  * Fix clearCompiledTemplate() needs template name

  * Korean localization lang updates

  * Add new config variable $serendipity['cors'] to allow to set
    Access-Control-Allow-Origin: * headers for sensible places
    (RSS feeds), to i.e. allow JavaScript's XMLHTTPRequest to read
    those feeds.

  * Introduce a section with modern recommended themes in the
    themes Backend menu. Themes can be included there by setting
    Recommended: Yes in their info.txt

  * Merge sidebar and event upgrade pages in one single page button

  * Add colorpicker as possible plugin option item type, set
    type to 'color' to use it

  * Comments made via the Backend on own articles don't trigger
    the comment notification (thanks to xoxys)

  * Fix missing perm checks for "standard user" in MediaLibrary

  * Fix show Dashboard entries by authors entries

  * Fix show Dashboard comments by authors entries (#385)

  * Use CDATA encoded body for ATOM feed

  * Fix: Ajax upload to ML now also works for non-images

  * Added new theme "Clean-Blog".  Clean Blog is a fully responsive,
    mobile first HTML5/CSS3 theme built on the Bootstrap
    framework.

  * Fixed checkbox entryproperties re-sets (#376)

  * Fixed media item delete handler (#371)

  * Rewrote Routing code for index.php to be outsourced into
    include/functions_routing

  * Removed broken feature for viewing Blog entries by multiple
    authors, dropped code from core and plugin_authors.

  * Optimize scaleImage returns

  * Fixed media item rename handler (#370)

  * Fixed and enhanced multiple media redirects and path / name
    related issues, as well as some better umlaut conversions

  * Allow strict media directory selection by toggle filter

  * Allow a better auto char conversion to media upload item names

  * Added Start / End pagination to MediaLibrary and entries list

  * Added new bulk image move ability to MediaLibrary, when extended
    Filters are set in Personal Preferences. This fixes several issues
    with rename AND remove and allows to automatically check and set
    MediaLibrary item entry paths on MOVE.

  * Fix importers to use the new mysqli API extension with PHP 5+

  * WIP: Added an internal cache to speedup s9y's site generation. Can
    be activated by setting use_internal_cache to true in
    serendipity_config.inc.php. Test feedback needed.

  * Added <IfModule mod_rewrite.c> checks to .htaccess for URL rewriting

  * Add support for cronjob plugin to spartacus, to notify Blog owner
    about possible updates (via e-mail)

  * Added link to preview spartacus themes on blog.s9y.org

  * Added two configuration variables that can be set in
    serendipity_config_local.inc.php to influence the Dashboard entry
    limit:

    - $serendipity['dashboardLimit']: How many future entries to fetch
      (default: 5)
    - $serendipity['dashboardDraftLimit']: How many entries in total
      shall be displayed in the Dashboard section (default: 5)
    - $serendipity['dashboardCommentsLimit']: How many comments
      (default: 5)

    (Draft entries will only be fetched if there are less future
    entries than the total entry limit)

  * Fix: the syndication plugin links subtome correctly to the atom
    feed when he is activated with the rss feed

  * Issue #238: When creating/renaming media directories, replace
    special characters with the same i18n rules like Permalinks are
    created, renaming umlauts etc.

  * Add "update all"-button to plugin update page

  * Issue #234: Granular options to force Backend popups for certain
    areas

  * Introduce serendipity['ajax'] to detect incoming ajax requests
    and react accordingly in core and plugins

  * Issue #248: Add $serendipity['forceBase64']=true option (can be
    set in serendipity_config_local.inc.php) to make Serendipity
    *not* use 8bit Imap functions for sending mail, for MTAs that
    behave erratically otherwise.

  * Issue #257: Make sure to check entered admin-user password

  * Issue #264: Drop $authorid for permissions based on images
    instead of directories, it was not used anymore

  * Some small enhancements to the error reporting


Version 2.0.6 ()
------------------------------------------------------------------------

  * Fix Bug #428, regression when fetching remote files, wrong call
    to HTTP_Request::getEffectiveUrl()

  * Fix Bug #433, secure variable on first time installation to prevent
    RCE, thanks to Shinkurt


Version 2.0.5 (November 28th, 2016)
------------------------------------------------------------------------

  * [Security] Improve preventing fetching local files, thanks to
    Xu Yue.

  * [Security] Prevent XSS in adding category and directory names,
    thanks to Edric Teo @smarterbitbybit.


Version 2.0.4 (September 26th, 2016)
------------------------------------------------------------------------

  * [Security] Prevent moving files by using their directory name.
    [Security] Possible SQL injection for entry category assignment
    [Security] Possible SQL injection for removing&adding a plugin

    All issues require a valid Backend login.
    Thanks to Hendrik Buchwald for finding this via their
    RIPS source code analyzer (www.ripstech.com)

  * [Security] Add new configuration option to enable fetching
    local files for the media uploader. By default this is now
    disabled to prevent Server Side Request Forgery (SSRF).
    Thanks to Xu Yue for pointing this out!


Version 2.0.3 (January 4th, 2016)
------------------------------------------------------------------------

  * Fix XSS in Backend comment editing form for logged-in authors,
    thanks to Onur Yilmaz and Robert Abela from Netsparker.com

  * Fix some Backend entry form related event messages


Version 2.0.2 (July 24th, 2015)
------------------------------------------------------------------------

  * Fix security issues reported by Tim Coen of Curesec.com:

    - Forbid uploading files with PHP contents and possible
      PHP execution by authenticated users (critical if
      you have possible untrustworthy authors)
    - Add proper escaping for comment approval tokens to prevent
      SQL injection (authenticated authors only)
    - Add proper escaping of comment's author names in the
      comment reply form to prevent XSS (2k11 template, javascript
      based)

  * Minor layout fixes for media DB media filters

  * Backported some Importer db bugfixes

  * CKEDITOR bugfix releases to 4.4.8 - please read the changelog.
    Includes widget, lineutils, fakeobjects Plugins and S9y added
    cheatsheet and procurator Plugins.
    Changed config.autoParagraph set to false, to prevent wrapping
    p tags around extraAllowedContent tags.

  * Smarty bugfix upgrades to 3.1.27 - please read the changelog.
    Compilation time was vastly improved.
    New Features in NEW_FEATURES.txt.

  * It is now possible to switch to a theme's admin theme if it has
    been selected as a Frontend theme first

  * Syndication Plugin Issue #285:
      - Add "none" as possible value for the xml-icon in the
        syndication plugin, to enable plain links
      - Reset subtome full icon path to support
        serendipity_getTemplateFile()
      - Link creation fixes for Bulletproof coloured style (eg blue)

  * Fix auto include of a User theme /admin/user.css Backend file.

      PLEASE NOTE:

      2.0.1 brought in an automated include of a themes "user.css"
      file. If you don't want to use such file any more (and you have
      one), you will have to delete or rename it by hand!

      Also please note, that user stylesheet selectors like

        .selector {
            background-image: url(img/example.jpg);
        }

      now need to use the {TEMPLATE_PATH} like

        .selector {
            background-image: url('{TEMPLATE_PATH}img/example.jpg');
        }

      Content of a user.css will always be put LAST into the combined
      CSS, this means it will override any possible plugin output.
      If a user.css file does not exist in your own template directory,
      but inside the default 2k11 template directory, this will always
      be used (this behaviour is called "default fallback chain").

  * Use https URLs for Atom feed, if called through HTTPS (hboeck)

  * Restore the "Show toolbar within media selector popup?" option,
    it was ignored before.

  * Fix Issue #321, negative offset for LIMIT SQL statements when
    using stable archive sorting and plugins like history.

  * Templatechooser will not apply theme in Backend admin.

  * Use "secure" flag for (session) cookies sent over SSL, thanks to
    dayton967

  * Make preview_iframe.tpl template files load the proper Frontend
    CSS file, including cache-busting version string when changing
    themes

  * Implement patch to properly initiate templates_c on installation
    for shared installs (thanks to fugue88)

  * Allow templatechooser plugin to read a custom "blacklist.txt"
    within its directory, that can blacklist certain themes from
    being selected.

  * Allow serendipity_setCookie() function to set custom expiry.

  * Adapt .htaccess profile of "mod_rewrite for 1&1 and problematic
    servers" to not include the "Options -MultiViews" option, since
    this is often blocked

  * Fix initializing Smarty framework in the preview/saving iframe,
    so that a template's config.inc.php is always loaded.

  * Show debugging .tpl file information with relative directory only

  * fix wrong upgrade removal of dead files with 2.0.1 update


Version 2.0.1 (March 12th, 2015)
------------------------------------------------------------------------

  * Fix missing escaping (possible XSS) of category names in the
    Backend Entry Admin, which would allow editors that create a
    forged category name to attack other editors in the Backend
    (privileged access to the Backend required). Thanks a lot to Edric
    Teo for reporting this issue.

  * Improved detection for possible upgrade/plugin/PHP errors. A
    warning will be emitted on the Dashboard, when the Serendipity
    JavaScript library could not be loaded.

  * syndication fix: use absolute urls for subtome

  * Issue 306: localStorage may be deactivated by setting a config
    option or using security-related extensions at least in some
    browsers, which might (at least in FF) break Backend JS
    functionality. Added extra tests to 2k11 Backend JS.

    If you use localStorage, please test if it is actually available
    by testing if localStorage !== null in JS.

  * Issue 280: Allow every theme to utilize a "user.css" file that
    gets loaded on top of the Frontend (or Backend, if in admin/
    subdirectory) theme. This file can be used for customized CSS of
    a Blog-admin which carries over to future Serendipity updates

  * Issue 299: Do not display Dashboard for users with no permission
    to perform actions in the Backend (frontend-users)

  * Make "rewriteURL" Smarty modifier available to do a
    {$CONST.PATH_ARCHIVE|rewriteURL} within a Smarty template file.

  * Add a generic odd/even for Backend Dashboard widgets to align
    properly. Future Dashboard widgets need to get the new extra
    class Dashboard widget on the section element they create.

  * Fix event emoticate plugin to reflect proper call usage of
    serendipity_getTemplateFile(), if a theme uses custom emoticons.
    UPDATE your themes emoticons.inc.php file, if have. See example
    file in plugin dir.

  * Change 2k11 config.inc.php to reflect proper
    serendipity_getTemplateFile() when Frontend files shall be
    referenced within the Backend.

  * Fixed missing file message for deleted media items

  * Fixed entry editor JS not emitting a 'No tags' msg in taxonomy
    quick view. Improved serendipity.tagsList exit if freetag plugin
    is not installed.

  * Minor Backend UI fixes (taxonomy quick view in entry editor,
     'Done' msg emitted by Bayes plugin)

  * Clearer language constants for entries in Dashboard, labelled
    "In progress"


Version 2.0 (January 23rd, 2015)
------------------------------------------------------------------------

  * Smarty fix for purging compiled files

  * Fix wrong search page ordering when stable archive was active

  * Prevent entryproperties from saving/displaying a browser-side
    stored password that was actually not set.

  * Stronger check for existing logger interface to prevent errors
    when it is not actively used.

  * Fix entryproperties being removed when publishing an article
    from the Dashboard and by specific plugins (freetag, trackback)
    that modify entry data.

  * Fix deleting comments when user is not an admin, but the entry
    belongs to him. Thanks to berberic.

  * Patch PEAR.php to use "static" isError declaration to prevent
    PHP error messages

  * Change order of IF-statements in entries.tpl to check for
    comment_moderate/comment_added, to properly emit the message
    whether a comment is being moderated.

  * Fix searching for entries in the admin panel with database
    types other than "mysql"

  * Change entry editor's category assignment to toggle between
    a hierarchical and a plain list (good for many categories)

  * Fix date formatting in entry editor to not use ISO year
    but the calendar year

  * Fix autoupdate version read and transmit


Version 2.0-rc2 (December 23rd, 2014)
------------------------------------------------------------------------

  * Fixes escaping of comments in the new Backend pane to prevent
    XSS. Thanks to Steffen Remann for reporting!

  * Fix wrong parameter count in serendipity_entity_decode


Version 2.0-rc1 (includes beta4/5/6) (December 19th, 2014)
------------------------------------------------------------------------

  * entryproperties plugin will now automatically disable nl2br
    markup, when the WYSIWYG editor is used to create en entry

  * PHP Requirement now is at: PHP 5.3+

  * Fix for syndication subtome onclick handler

  * Fix problematic preview stylesheet reference

  * Optimized clearing Smarty template files on upgrading

  * Properly reset the "disable markup" feature of entryproperties
    plugin when none selected

  * PHP 5.4+ fix to properly call htmlspecialchars() / htmlentities() /
    html_entity_decode() with a charset option, that has been
    set to to default to UTF-8 and will yield empty strings when
    being used in NON-UTF-8 environments. Now we utilize a
    serendipity_specialchars() wrapper call.

  * Added SQLite3 OO database layer for PHP 5.4+

  * New personal preference to choose CKEditor toolbar presets.
    Presets can be overwriten through a
    templates/xxx/admin/ckeditor_custom_config.js if needed.
    See htmlarea/ckeditor_s9y_config.js for details.

  * Proof of concept templates "default-php" and "default-xml" have
    been moved to Siber...Spartacus. They would need adapting to
    Serendipity 2.0 (simple methods like getConfigDir() et al),
    but since those Template APIs have virtually zero usage scenario,
    they remain experimental.

  * Added new PAT_JS mod_rewrite rule to .htaccess files

  * Removed experimental support for PHP/SMARTY IN-MEMORY caching
    added in 2.0-beta3, since this could not work.

  * Smarty 3.1.21 upgrade (see changelog)

  * Fix ImageMagick new sizing issues while forcing image geometry
    exactly to given sizes with imageselectorplus

  * Fix issue #220 with pdf directory moving rename() error

  * Fix bug in entry listing, which showed wrong categories for
    entries (Issue #201)

  * Improve RegExp for Feed-URL matching, thanks to fugue88

  * Proper SQLite PDO filenames in shared installations (Issue #214)

  * ImageMagick now can get parameters to generate thumbnails,
    see serendipity_config.inc.php for example values

  * Allow to enable/disable the new autosave feature in personal
    preferences (Issue #213)

  * Re-added installer test for writable serendipity base directory


Version 2.0-beta3 (July 25th, 2014)
------------------------------------------------------------------------

  * Move admin/media_showitem.tpl to theme's directory in 2k11. With
    an adaptation in serendipity_admin_image_selector.php, this now is
    a "true" Frontend template which uses the styles of the Frontend
    theme. Theme authors might want to adapt it to their themes.

  * Moved general syndication plugin option into the core

  * Smarty 3.1.19 upgrade (see changelog)

  * Fixed thumbnail recreation, Issue #134

  * Merged external JS libraries into a central "plugins.js" of the 2k11
    Backend template, can be updated through
    templates/2k11/admin/js/gruntipity.php helper script.

  * Adapted database table structure change for statistics, shoutbox,
    karma and spamblock plugin (for new field definition of "ip" field)
    Thanks to rohdef!

  * Added new option "enabledBackendPopups" that allow to specify
    if inline modal dialogs or popups are used in the Backend for
    e.g. the category selectory and media library

  * added experimental support for PHP/SMARTY IN MEMORY caching
    Enabled by default, if classes found loaded.
    Disable with
      $serendipity['disable_apc'] = true;
    and
      $serendipity['disable_memcache'] = true;

  * Support added in serendipity_db_schema_import for sqlite
    autoincrement

  * Remove Google Reader button from syndication plugin options

  * Add subToMe-button to syndication plugin and change its defaults

  * Use Browsercache to save cache and restore entries

  * Improved installer to forbid using database table prefixes with
    special characters

  * Themes using Engines are now able to use the parent's
    configuration

  * Prevent "new" plugin api to install double instances of plugins
    that are not stackable (issue #45)

  * Back button in plugin-config

  * Adapted serendipity_editor.js to provide more global (though
    deprecated) API access methods for plugins like amazonchooser
    and linktrimmer, to perform insertion. Also fixed the
    insertion of text when the ID of the element is not prefixed

  * Move sort by name to simple filter in ML, replace file extension

  * Remember selected media library folder

  * Show upload-success or error with the ajax image uploader

  * Fix preview entry exception (issue #119)

  * Add serendipity.toggle_collapsible as a reusable JS function
    for the core Backend and Backend sections emitted by plugins as
    an easy way to provide show/hide functionality. (yellowled)

  * Fixed media insert target bug (issued by #143, #145, #121)

  * Fixed publish drafted-entries via Dashboard (issue #160)

  * All Frontend themes that rely on the bundled Core jQuery library
    are currently using the jquery.noConflict-mode for compatibility
    to older plugins.
    This mode is now considered deprecated and will be removed in
    future releases. A new variable:
      $serendipity['capabilities']['jquery-noconflict'] = false;
    in your theme's config.inc.php file can now turn of that
    noConflict-mode.

  * Due to distinction of Backend and Frontend themes, each theme
    that provides a custom jquery.js now only does so for the
    Frontend. The Backend now listens to a:

      $serendipity['capabilities']['jquery_backend'] = false;

    variable, and the file needs to be jquery_backend.js that
    a Backend theme would reference to.

  * Changed 2k11's config.inc.php file to provide a more stable
    call of event hooks so that other themes can also hook
    their own events.

  * Changed JS for category filtering and its reset button to be a
    reusable function, which is now also used in the list of
    installable plugins.

  * Fixed wrong local documentation URL in plugin configuration

  * Added new "backend_dashboard" event-hook for plugins to use
    within Dashboard.

  * Backend and Frontend themes can now be set independently from
    each other. New Backend themes now need to set:

      Backend: Yes

    in their info.txt file. If you adapt a custom admin theme,
    ensure that it is compatible to the new "2k11" Backend to
    ensure proper future usage within Serendipity. The bulletproof
    Backend will now no longer be recognized as a Backend theme
    option, but can be selected as a new Frontend theme, while
    using 2k11 (=default) in the Backend.

  * Include klogger, call it as $serendipity['logger']->debug/error.
    The log-level can be set in the general configuration and is
    disabled by default.

  * Fixed missing s9ymdb ID

  * Add HTTP_Request2 and dependencies as bundled libraries and
    update PEAR library to version 1.9.4

  * Implemented AJAX uploadResize option to allow resizing an image
    before upload (onli)

  * Improved file/directory removal code to (hopefully) fail more
    gracefully

  * Change "default" admin Backend template fallback chain so that
    old admin themes can theoretically be shown with the "old"
    admin interface. This however in many themes breaks the
    Serendipity workflow. In other words, currently old custom Backend
    themes are deprecated. We are still working on how to deal
    with this and if we can add some sort of compatibility or port.

  * Fix bundled jquery's source mapping, upgraded to 1.11.1

  * Fixed missing media name in resize GET URL

  * Fix MediaDB overlay display

  * Re-Added possibility to change filename/target directory for
    media uploads

  * Update CKEditor to 4.4

  * Fixed some missing internationalization instances

  * Minor CSS improvements for upgrader, plugin sequencing widget

  * RSS importer accepts pubDate in addition to pubdate element.

  * Upgrader in Dashboard can be disabled, returns error message when
    URL is not accessible

  * Added a category filtering ability for the entry editor

  * Better check when removing old/dead files to prevent error
    messages

  * WYSIWYG editor respects image floats

  * Support html5 multiple file upload

  * Modernizr, magnificPopup updates

  * Improvements to equal heights js, button labels

  * No longer truncate long entry titles

  * Improve non-WYSIWYG editor tag insertion, url insertion

  * Improve less DOM firing on certain javascript tasks

  * Introduce "js_backend" event hook


Version 2.0-beta1 and followup -beta2 (April 14th, 2014)
------------------------------------------------------------------------

  * Upgrade Smarty libs to 3.1.18

  * Automatic upgrade removal of old Smarty2 files (2.0-alpha2)
    function uses SPL

  * Implemented patch https://github.com/s9y/Serendipity/pull/15

  * When switching Themes, both the Backend and the Frontend
    will remember the timestamp of the last theme change,
    to make sure that the browser will not cache a mismatching CSS.

  * Fix theme change issues with global template vars in core
    (1559472ca3) see 'temporary added empty $template_config_groups'
    in 1.7-rc2 (eb77dc369a)

  * Use Smarty for Backend display output

  * "Themes" are now what has previously been mixed as "Design",
    "Theme", "Template" or "Layouts".

  * WYSIWYG-Spawn-API reworked (2k11/admin/wysiwyg_init.tpl)

  * All Javascript-functions like SetCookie now reside in a
    serendipity-object, simulating a namespace.
      SetCookie(...)
    became
      serendipity.SetCookie(...)

  * Renamed JS-Function:
      toggleCategorySelector became toggle_category_selector

  * The advanced js option (eyecandy) got removed, as such a thing
    like advanced js doesn't exist anymore

  * dashboard_plugin has an equivalent in the core, replacing the
    frontpage

  * Constants like S9Y_FRAMEWORK_COMPAT are no longer set
    (include_once is used instead)

  * New additional option to render Smarty-functions:
    serendipity_smarty_show($template, $data)

  * A number of functions now returns their result instead of echoing
    them (TODO: a bunch of image- and
    trackback-functions still use echo for messages"):
      serendipity_plugin_config
      serendipity_printEntryForm
      serendipity_printEntries
      function serendipity_showMedia
      serendipity_showPropertyForm
      showMediaLibrary
      serendipity_guessInput
      memSnap
      serendipity_displayTopUrlList
      serendipity_displayTopExits
      serendipity_displayTopReferrers
      serendipity_printConfigTemplate
      show_plugins

  * Functions removed from the core:
      serendipity_printConfigJS

  * Functions added to the core:
      serendipity_generateImageSelectorParams

  * All internal plugins got extracted from plugin_internal.inc.php
    and moved to plugins/.
    They are renamed to work there (upgrader task provides migration):
      serendipity_calendar_plugin    became serendipity_plugin_calendar
      serendipity_quicksearch_plugin became serendipity_plugin_quicksearch
      serendipity_archives_plugin    became serendipity_plugin_archives
      serendipity_categories_plugin  became serendipity_plugin_categories
      serendipity_syndication_plugin became serendipity_plugin_syndication
      serendipity_superuser_plugin   became serendipity_plugin_superuser
      serendipity_plug_plugin        became serendipity_plugin_plug

  * Add plugin hook "js", generating a virtual serendipity.js

  * Admin JS is now bundled in serendipity_editor.js.tpl and
    rendered using Smarty in the theme config

  * Admin JS got rewritten using jQuery where applicable

  * serendipity_define.js.php removed

  * Removed support for layout.php

  * The whole PHP-Code now almost never echoes integrated HTML, but
    uses Smarty template (TODO: Remove the almost)
    The necessary Smarty-templates reside in 2k11/admin/
    Every theme can generate its own Backend if it integrates those
    templates under admin/ itself

  * 2k11 is set as the new default Backend, replacing bulletproof.
    default remains the fallback so far.

  * A number of functions had some arguments removed:
    * function serendipity_displayImageList:
        From
            function serendipity_displayImageList($page = 0, $lineBreak = NULL, $manage = false, $url = NULL, $show_upload = false, $limit_path = NULL, $smarty_display = true)
        to
            function serendipity_displayImageList($page = 0, $lineBreak = NULL, $manage = false, $url = NULL, $show_upload = false, $limit_path = NULL)
    * function serendipity_showMedia
        From
            function serendipity_showMedia(&$file, &$paths, $url = '', $manage = false, $lineBreak = 3, $enclose = true, $smarty_vars = array(), $smarty_display = true)
        to
            function serendipity_showMedia(&$file, &$paths, $url = '', $manage = false, $lineBreak = 3, $enclose = true, $smarty_vars = array())
    * generate_plugins
        From
            static function generate_plugins($side, $tag = '', $negate = false, $class = null, $id = null, $tpl = 'sidebar.tpl')
        to
            static function generate_plugins($side, $negate = false, $class = null, $id = null, $tpl = 'sidebar.tpl')

  * serendipity_showMedia now no longer returns the used template and
    echoes the generated HTML, but only returns the generated HTML

  * Themes now have their own configuration page,
    ?serendipity[adminModule]=templates&serendipity[adminAction]=editConfiguration

  * jQuery in the Backend no longer runs in noConflict-mode. Use
    $(...) instead of jQuery(...)

  * The entryproperty-plugin will now always delete its cache on
    uninstall, not only if the cache is activated then

  * serendipity_is_iframe now really only checks for iframe and
    doesn't also echo it

  * Added option simpleFilters (meant to indicate to show less
    filters and poweruser-options)

  * serendipity_admin_image_selector.php no longer used by 2k11,
    instead the media library (with admin/media_choose.tpl,
    admin/media_upload.tpl, media_pane.tpl, media_items.tpl)
    can generate the imageselector on its own. The editor calls
    serendipity_admin.php?serendipity[adminModule]=media instead,
    with serendipity[textarea] indicating the target, and
    serendipity[showMediaToolbar] activating the imageSelector modus

  * New required PHP-Version: 5.3 or higher (checked in the installer)


Version 1.7.8 (February 9th, 2014)
------------------------------------------------------------------------

  * Fixed POST for db entry insert, caused by 1.7.6 security feature


Version 1.7.7 (February 6th, 2014)
------------------------------------------------------------------------

  * Fixed PHP parse error in templatechooser plugin. Blame garvin. :(


Version 1.7.6 (February 6th, 2014)
------------------------------------------------------------------------

  * Fixed Backend security issues, thanks to Stefan Schurtz:

      - XSS of users realname in "Manage users" section
        (Backend, requires login)
      - XSS when creating an entry with bad id/timestamp values
        (Backend, requires login)
      - SQL-Injection for plugin installation parameter
        (Backend, requires admin login)

  * Templatechooser plugin uses "default" template as fallback,
    not "bulletproof".


Version 1.7.5 (January 18th, 2014)
------------------------------------------------------------------------

  * Fixed textile PHP 5.2 (namespace) compat issue

  * Added default value to spamblocks required_fields option [name,
    comment]


Version 1.7.4 (January 11th, 2014)
------------------------------------------------------------------------

  * Fixed emoticate plugin icon link to check for textile class

  * Upgrade textile plugin libs - lib3 extends to PHP >= 5.3.
    Please check for new options!

  * Fixed spamblocks Captcha imagecreate() with PHP > 5.3 versions

  * Smarty 3.1.16 bugfix release - please read bundled-libs/Smarty/change_log.txt
    about changes to versions 3.1.16 and 3.1.15.
    Please also see special bundled-libs/Smarty/3.1.16_RELEASE_NOTES.txt

  * Removed blogg.de filter from spamblock plugin, adapted htaccess
    IP block algorithm for race conditions. .htaccess can now contain
    multiple Deny From ranges to prevent parsing problems (DLange)

  * Fixed IP columns in spamblocklog, spamblock_htaccess, karmalog, visitors
    and shoutbox to varchar(45) for IPv6 - including tunneled IPv4 (39+6)

  * Fixed possible double includement of plugin_internal.inc.php

  * Fix possible temporary caching errors failing $eventData[0]['properties']

  * Basic support for static blocks (includeentry plugin) in 2k11.

  * Added "backend_footer" event hook

  * Exclude "frontpage extensions" directories "_vti_cnf" on windows servers
    in Media Library

  * Fixed pagination when searching terms with fetchlimit < 4

  * Fixed deprecated /e modifier with PHP >= 5.5 in nl2br plugin restore method


Version 1.7.3 (August 28th, 2013)
------------------------------------------------------------------------

  * Trackback to https:// style URLs will use proper port 443 instead
    of 80.

  * Disabled htmlarea spellchecker module, http://osvdb.org/87395
    Thanks for Henri Salo for pointing this out. CVE-2013-5670


Version 1.7.2 (July 26th, 2013)
------------------------------------------------------------------------

  * Fix a syntax error in the "mysql" deprecation code, thanks
    to Ian


Version 1.7.1 (July 26th, 2013)
------------------------------------------------------------------------

  * Added new event hooks "backend_plugins_install", "backend_plugins_update"
    and "backend_templates_install".

  * Serendipity will switch to mysqli if PHP >= 5.5 is used (mysql
    is deprecated)

  * Smarty upgrade to 3.1.14 (read changeLog and the README for API changes since Smarty 2)

  * Upgrader will now remove/delete the browsercompatibility plugin

  * Fixed Media Library exclude path to not show/proceed ckeditor/kcfinders .thumbs dir

  * Fixed bulletproof->colorset GET mismatch with categorytemplates plugin
    config.inc.php [Line 29]

  * German translation for stable archives added (YL)

  * Fixed curl result bug in spartacus plugin

  * Create new migration task for propagate defaultBaseURL when
    currently empty (onli)

  * Fixed statistics sidebar querys ( & for PostgreSQL ) [242520b]
    and added some missing html end tags

  * Added missing current group name when editing usergroups


Version 1.7 (May 11th, 2013)
------------------------------------------------------------------------

  * rc4: Get ready for CKEDITOR-wysiwyg Plugin mode

  * rc4: Fixed fetching javascript object (for nugget textareas) in non-wysiwyg-mode

  * rc4: Change .htaccess blocking mechanism by spamblock plugin to not fetch
    too many datarows, thanks to DLange from the forums. (The .htaccess
    feature is still considered experimental, use at your own risk ;))

  * rc4: Fixed entryproperties Backend 'cache now' link

  * rc3 + rc4: Media database: Escape more Cookie values to prevent storing
    possible XSS (http://board.s9y.org/viewtopic.php?f=3&t=19142).
    Escape hotlinked media filename. Escape importer host name error
    Thanks to GreenSun from the forums for bringing this to attention,
    originally reported by Dshellnoi Unix

  * rc2: Alter entries.tpl to add the line:
    {assign var="entry" value=$entry scope="parent"}
    for proper propagation of $entry to sub-templates.

  * rc2: Alter error reporting to only fail when 'debug' mode is enabled,
    so that "normal" Blog installations will not fail on specific
    E_STRICT warnings that are not important.

  * rc2: temporary added empty $template_config_groups into templates with config,
    to avoid display troubles for template changes, if previous template had these set.
    Please check your template.

  * rc2: reflect POST submitted changes in Bulletproof template configs re-set situations

  * various PHP 5 compatibility fixes in core and plugins

  * Allow entryproperties plugin to define defaults for custom fields

  * Onyx, Net_URL classes: Remove PHP4 style constructor due to
    PHP5 error "Constructor already defined"

  * Improved RSS sidebarplugin to support Atom

  * Bundled simplepie

  * For Blogs running on a non-UTF-8 language, set a Smarty constant
    to indicate the actually used charset.

  * Added to use MyISAM handler for s9y tables (we do not use InnoDB
    features, but rely on MyISAM fulltext)

  * fixed defaultBaseURL did not show up installer. Thanks to onli.
    Follow up from c292bad

  * fixed draft & future entries preview link in Backend

  * Improved karmarating plugin to be able to use AJAX calls
    (gregman)

  * Allow Smarty to fetch .tpl files from all directories so that
    s9y plugin can use the fetch() call for their .tpl files no
    matter which (symlinked) directory the plugin resides in.
    The Smarty security policy to us only serves as a restriction
    within .tpl files to not allow arbitrary PHP modifier/function calls.
    If in the future Smarty supports enforcing trustedDir checks on
    {include} calls separately to smarty->fetch() calls, we'll also
    add that to .tpl files.
    (garvinhicking)

  * Patch by Markus Brkner: Properly handle files that have no
    extension in media database

  * Made Spartacus recognize github.com mirror (garvinhicking)

  * Add "Summary" output to title of summary archive pages, patch by
    hboeck

  * Set the Smarty object by instance (ophian)
    It is often needed to access the Smarty object from anywhere in your code, e.g. in plugins
    We now ensure that there is only one instance of the object available.
    To obtain an instance of this class: $serendipity['smarty'] = Serendipity_Smarty::getInstance();
    The first time this is called a new instance will be created. Thereafter, the same instance is handed back.
    To overwrite use $serendipity['smarty'] = new Serendipity_Smarty; to create a new instance.

  * Set a global Serendipity errorToExceptionHandler (ophian)
    changed some old Smarty trigger_errors to PHPs native function

  * Updated spamblock plugin (ophian)
    changed wordfilter to function and Commenters moderation check verify_once
    to get checked via wordfilter to reject known spam comments before

  * Changed Backend comment (error) messages  (ophian)
    as now captured and styleable messages
    (newly added .serendipity_backend_msg_notice css class)

  * Updated nl2br plugin (ophian)
    added isolation tag using nl to br
    this also adds some NoBR buttons to Backend entry forms

  * Smarty3 support (ophian)
    with this upgrade Serendipity / Smarty will at least need a webserver running the PHP 5.2 series.
    As of August 2011, all PHP users should note, that the PHP 5.2 series is NOT supported anymore by the PHP developers.
    All users are strongly encouraged to upgrade to PHP 5.3.8 and up. Please refer to your ISP about this.

  * Added new serendipity['defaultBaseURL'] variable that makes sure
    that the baseURL is not overriden when configuring serendipity
    with a possibly autodetected currentl URL. Patch by Manko10.


(Older NEWS see file NEWS_OLD)

